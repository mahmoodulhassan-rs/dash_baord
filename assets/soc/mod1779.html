<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Author" content="<username>"> <meta name="GENERATOR" content="urg/version [en] (platform name) [urg]">
<title>Unified Coverage Report :: Module :: edma_pbuf_tx_tcp</title>
<link type="text/css" rel="stylesheet" href="css/.urg.css">
<link type="text/css" rel="stylesheet" href="css/.layout.css">
<link type="text/css" rel="stylesheet" href="css/.breadcrumb.css">
<script type="text/javascript" src="js/.jquery.js"></script>
<script type="text/javascript" src="js/.jquery-ui.js"></script>
<script type="text/javascript" src="js/.sortable.js"></script>
<script type="text/javascript" src="js/.layout.js"></script>
<script type="text/javascript" src="js/.breadcrumb.js"></script>
<script type="text/javascript">
var layout, westLayout, centerLayout;
$(document).ready(function () {
  if ($("#north-bread-crumb")) {
    $("#north-bread-crumb").jBreadCrumb({easing:'swing'})
  }
  layout = $("body").layout({ 
    resizable: true,
    spacing_open: 4,
    spacing_closed: 4,
    north: {
      size: 76
    },
    south: {
      size: 45,
      initClosed: true
    },
    west: {
      size: 500,
      resizable: true,
      initClosed: false
    }
  });
  centerLayout = $('div.ui-layout-center').layout({
    north__paneSelector: ".ui-layout-center-inner-north",
    center__paneSelector: ".ui-layout-center-inner-center", 
    north__size: 50,
    spacing_open: 4,
    spacing_closed: 4
  });
});
</script>
</head>
<body onLoad="initPage();"><div class="ui-layout-north">
<div class="logo"></div>
<center class="pagetitle">Module Definition</center>
<div align="center"><a href="dashboard.html" ><b>dashboard</b></a> | <a href="hierarchy.html" ><b>hierarchy</b></a> | <a href="modlist.html" ><b>modlist</b></a> | groups | <a href="tests.html" ><b>tests</b></a> | <a href="asserts.html" ><b>asserts</b></a></div>

</div>
<div class="ui-layout-west">
<div name='tag_edma_pbuf_tx_tcp'>
<div class=modhdr>
<br clear=all>
<span class=titlename>Module : <a href="#"  onclick="showContent('tag_edma_pbuf_tx_tcp')">edma_pbuf_tx_tcp</a></span>
<br clear=all>
<table align=left>
<tr class="sortablehead">
<td>SCORE</td><td>LINE</td><td>COND</td><td>TOGGLE</td><td>FSM</td><td>BRANCH</td><td>ASSERT</td></tr><tr>
<td class="s4 cl rt"> 46.82</td>
<td class="s4 cl rt"><a href="mod1779.html#Line" > 49.65</a></td>
<td class="s7 cl rt"><a href="mod1779.html#Cond" > 71.43</a></td>
<td class="s1 cl rt"><a href="mod1779.html#Toggle" > 17.94</a></td>
<td class="wht cl rt"></td>
<td class="s4 cl rt"><a href="mod1779.html#Branch" > 48.28</a></td>
<td class="wht cl rt"></td>
</tr></table><br clear=all>
<span class=repname>Source File(s) : </span>
<br clear=all>
<a href="javascript:void(0);"  onclick="openSrcFile('/nfs_project/gemini/DV/nadeem/dv/night_reg/gemini/design/ip/GbE/hdl/edma_pbuf_tx_tcp.v')">/nfs_project/gemini/DV/nadeem/dv/night_reg/gemini/design/ip/GbE/hdl/edma_pbuf_tx_tcp.v</a><br clear=all>
<br clear=all>
<span class=repname>Module self-instances :</span>
<br clear=all>
<table align=left>
<tr class="sortablehead">
<td class="alfsrt">NAME</td><td>SCORE</td><td>LINE</td><td>COND</td><td>TOGGLE</td><td>FSM</td><td>BRANCH</td><td>ASSERT</td></tr><tr>
<td class="wht cl wordwrap"><a href="mod1779.html#inst_tag_209951"  onclick="showContent('inst_tag_209951')">config_ss_tb.DUT.config_ss.gbe_u.gem_top_u.i_gem_ss.i_gem_top.gen_dma.gen_pbuf_axi_dma.i_edma_pbuf_axi_top.i_edma_pbuf_axi_tx.i_edma_pbuf_axi_tx_wr.i_edma_pbuf_tx_tcp<img src="fx.gif" class="icon"></a></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
</tr></table></div>
</div>
<br clear=all>
</div>
<div class="ui-layout-center">
<div class="ui-layout-center-inner-center">
<div name='tag_edma_pbuf_tx_tcp'>
<a name="Line"></a>
Line Coverage for Module : <a href="mod1779.html" >edma_pbuf_tx_tcp</a><br clear=all>
<table class="noborder">
<col width="122">
<col span="4" width="82">
<tr><th></th><th>Line No.</th><th>Total</th><th>Covered</th><th>Percent</th></tr>
<tr class="s4"><td class="lf">TOTAL</td><td></td><td>143</td><td>71</td><td>49.65</td></tr>
<tr class="s10"><td class="lf">ALWAYS</td><td>180</td><td>10</td><td>10</td><td>100.00</td></tr>
<tr class="s6"><td class="lf">ALWAYS</td><td>438</td><td>3</td><td>2</td><td>66.67</td></tr>
<tr class="s3"><td class="lf">ALWAYS</td><td>456</td><td>17</td><td>6</td><td>35.29</td></tr>
<tr class="s2"><td class="lf">ALWAYS</td><td>503</td><td>50</td><td>12</td><td>24.00</td></tr>
<tr class="s3"><td class="lf">ALWAYS</td><td>598</td><td>28</td><td>10</td><td>35.71</td></tr>
<tr class="s8"><td class="lf">ALWAYS</td><td>656</td><td>35</td><td>31</td><td>88.57</td></tr>
</table>
<pre class="code"><br clear=all>
179                     begin
180        1/1            if (~n_hreset)
181                       begin
182        1/1              sop &lt;= 1'b0;
183        1/1              dpram_we_d1 &lt;= 1'b0;
184        1/1              dpram_eop_d1 &lt;= 1'b0;
185                       end
186                       else
187                       begin
188        1/1              dpram_we_d1 &lt;= dpram_we;
189        1/1              dpram_eop_d1 &lt;= dpram_eop;
190        1/1              if (man_rd_new_pkt)
191        1/1                sop &lt;= 1'b1;
192        1/1              else if (dpram_we)
193        1/1                sop &lt;= 1'b0;
                        MISSING_ELSE
194                       end
195                     end
196                       wire   [5:0]        l3_hdr_offst;    // Byte offset of L3
197                       wire   [15:0]       end_of_ip_hdr_offset;
198                       wire   [15:0]       running_byte_count;
199                       wire   [6:0]        ipv4_csum_offset;
200                       wire   [6:0]        start_of_ip_srcadd_offset;
201                       wire   [6:0]        end_of_ip_srcadd_offset;
202                       wire   [15:0]       start_of_ip_destadd_offset;
203                       wire   [15:0]       end_of_ip_destadd_offset;
204                       wire   [15:0]       end_of_tcpudp_pld_offset;
205                       wire   [15:0]       l4_hdr_offst;
206                       wire   [15:0]       tcp_length;
207                       wire   [15:0]       tcp_csum_offset;
208                       wire   [15:0]       ipv4_result;
209                       wire   [1:0]        ipv4_result_par; // parity of ipv4_result
210                       wire   [15:0]       ipv4_result_n;
211                       wire                ipv4_offload_valid;
212                       wire                tcp_offload_valid;
213                       wire                l4_tcp_hdr_detected;
214                       wire                l4_udp_hdr_detected;
215                     
216                      edma_pkt_decode #(
217                           .include_screeners      (1'b0),
218                           .p_num_type1_screeners  (0),
219                           .p_num_type2_screeners  (0),
220                           .p_num_scr2_compare_regs(0),
221                           .p_num_scr2_ethtype_regs(0)
222                      ) i_edma_pkt_decode (
223                     
224                         .host_clk               (hclk),
225                         .host_rst_n             (n_hreset),
226                         .soft_enable            (!soft_reset),
227                     
228                         .data                   (dpram_din[127:0]),  // passing only data without parity
229                         .sop                    (sop),
230                         .eop                    (dpram_eop),
231                         .valid                  (dpram_we),
232                     
233                         .ptp_unicast_addr_en    (1'b0),
234                         .ptp_unicast_addr       (32'd0),
235                         .disable_preamble       (1'b0),
236                     
237                         .running_byte_count     (running_byte_count ),
238                         .running_byte_count_nxt (),
239                         .dma_bus_width          (dma_bus_width),
240                         .svlan_type             ({1'b1,16'h88a8}),
241                     
242                         .mac_dest_addr_c        (),
243                         .mac_dest_addr_stb_c    (),
244                         .mac_src_addr_c         (),
245                         .mac_src_addr_stb_c     (),
246                         .vlan_tag1              (),
247                         .vlan_tag1_stb          (),
248                         .vlan_tag2              (),
249                         .vlan_tag2_stb          (),
250                         .ethertype              (),
251                         .ethertype_stb          (),
252                         .ip_sa                  (),
253                         .ip_sa_stb              (),
254                         .ip_da                  (),
255                         .ip_da_stb              (),
256                         .l3_hdr_offst           (l3_hdr_offst),
257                         .l4_hdr_offst           (l4_hdr_offst),
258                         .rx_csum_zero           (),
259                         .start_of_ip_srcadd_offset (start_of_ip_srcadd_offset),
260                         .start_of_ip_destadd_offset(start_of_ip_destadd_offset),
261                         .end_of_ip_srcadd_offset   (end_of_ip_srcadd_offset),
262                         .end_of_ip_destadd_offset  (end_of_ip_destadd_offset),
263                         .end_of_tcpudp_pld_offset  (end_of_tcpudp_pld_offset),
264                         .tcp_csum_offset        (tcp_csum_offset),
265                         .pld_offst              (),
266                         .tcp_length             (tcp_length),
267                         .decode_out_vld         (),
268                         .ipv4_decodes_vld       (),
269                         .ipv4_csum_offset       (ipv4_csum_offset ),
270                         .end_of_ip_hdr_offset   (end_of_ip_hdr_offset ),
271                         .ptp_version            (),
272                         .ptp_timestamp_offset   (),
273                         .ptp_event_msg          (),
274                         .ptp_general_msg        (),
275                         .ptp_sync_msg           (),
276                         .ptp_dreq_msg           (),
277                         .ptp_follow_msg         (),
278                         .ptp_dresp_msg          (),
279                         .ptp_pdreq_msg          (),
280                         .ptp_pdresp_msg         (),
281                         .ptp_seqid              (),
282                         .ipv4_frame_detected    (ipv4_frame_detected),
283                         .ipv6_frame_detected    (),
284                         .l4_tcp_hdr_detected    (l4_tcp_hdr_detected),
285                         .l4_udp_hdr_detected    (l4_udp_hdr_detected),
286                         .ptpoe_type_detected    (),
287                         .snap_hdr_detected      (),
288                     
289                         .queue_ptr_rx           (),
290                     
291                         .screener_type1_regs    (1'b0),
292                         .screener_type2_regs    (1'b0),
293                         .scr2_compare_regs      (1'b0),
294                         .scr2_ethtype_regs      (1'b0),
295                         .tcp_status             (tcp_status_c)
296                     
297                       );
298                     
299                      edma_csum #( .SKIP_OVER_CSUM(1'b1)) i_edma_ipv4_csum (
300                     
301                         .host_clk                (hclk),
302                         .host_rst_n              (n_hreset),
303                     
304                         .tx_r_data               (dpram_din_d1),
305                         .tx_r_eop                (dpram_eop_d1),
306                         .tx_r_err                (1'b0),
307                         .tx_r_valid              (dpram_we_d1),
308                     
309                         .csum_start_offset       ({10'd0,l3_hdr_offst}),
310                         .running_byte_count      (running_byte_count),
311                         .tx_e_valid              (dpram_we),
312                         .csum_offset             ({9'd0,ipv4_csum_offset}),
313                         .csum_end_offset         (end_of_ip_hdr_offset),
314                         .dma_bus_width           (dma_bus_width),
315                     
316                         .csum                    (ipv4_result_n),
317                         .csum_vld                (ipv4_offload_valid)
318                       );
319                       assign ipv4_result = ~ipv4_result_n;
320                     
321                     wire [15:0] tcp_pseudo_src_result;
322                      edma_csum #( .SKIP_OVER_CSUM(1'b0)) i_edma_pseudo_src_csum (
323                     
324                         .host_clk                (hclk),
325                         .host_rst_n              (n_hreset),
326                     
327                         .tx_r_data               (dpram_din_d1),
328                         .tx_r_eop                (dpram_eop_d1),
329                         .tx_r_err                (1'b0),
330                         .tx_r_valid              (dpram_we_d1),
331                     
332                         .csum_start_offset       ({9'd0,start_of_ip_srcadd_offset}),
333                         .running_byte_count      (running_byte_count),
334                         .tx_e_valid              (dpram_we),
335                         .csum_offset             (16'h0000),
336                         .csum_end_offset         ({9'd0,end_of_ip_srcadd_offset}),
337                         .dma_bus_width           (dma_bus_width),
338                     
339                         .csum                    (tcp_pseudo_src_result),
340                         .csum_vld                ()
341                       );
342                     
343                     wire [15:0] tcp_pseudo_dest_result;
344                      edma_csum #( .SKIP_OVER_CSUM(1'b0)) i_edma_pseudo_dest_csum (
345                     
346                         .host_clk                (hclk),
347                         .host_rst_n              (n_hreset),
348                     
349                         .tx_r_data               (dpram_din_d1),
350                         .tx_r_eop                (dpram_eop_d1),
351                         .tx_r_err                (1'b0),
352                         .tx_r_valid              (dpram_we_d1),
353                     
354                         .csum_start_offset       (start_of_ip_destadd_offset),
355                         .running_byte_count      (running_byte_count),
356                         .tx_e_valid              (dpram_we),
357                         .csum_offset             (16'h0000),
358                         .csum_end_offset         (end_of_ip_destadd_offset),
359                         .dma_bus_width           (dma_bus_width),
360                     
361                         .csum                    (tcp_pseudo_dest_result),
362                         .csum_vld                ()
363                       );
364                       wire [16:0] tcp_pseudo_add_result_a;
365                       assign tcp_pseudo_add_result_a = {tcp_pseudo_dest_result[7:0],tcp_pseudo_dest_result[15:8]} +
366                                                        {tcp_pseudo_src_result[7:0], tcp_pseudo_src_result[15:8]};
367                     
368                       wire [16:0] tcp_pseudo_add_result;
369                       assign tcp_pseudo_add_result   = tcp_pseudo_add_result_a[15:0] + tcp_pseudo_add_result_a[16];
370                     
371                       // tcp_pseudo_result holds the CSUM covering the source add + dest address of the Ip header
372                       // Also need to add the other parts of the Pseudo header including the length of the TCP
373                       // payload and the protocol field.  The protocol field is 6 for TCP and 17 for UDP.  Adding the
374                       // length and protocol here is not going to breach a 16bit limit, so no need to add the carry ...
375                       //
376                       wire [15:0] proto_field;
377                       wire [16:0] add_tcplen_prot_pad;
378                       wire [15:0] add_tcplen_prot;
379                       assign proto_field = l4_tcp_hdr_detected ? 16'h0006 : 16'h0011;
380                     
381                       assign add_tcplen_prot_pad = tcp_length + proto_field;
382                       assign add_tcplen_prot     = add_tcplen_prot_pad[15:0];
383                     
384                       // Now add the tcp_pseudo_add_result to the add_tcplen_prot
385                       // this can be registered because the writeback into the SRAM wont happen for a few cycles
386                       wire [16:0] tcp_pseudo_result_a;
387                       wire [16:0] tcp_pseudo_result_b;
388                       assign tcp_pseudo_result_a = add_tcplen_prot[15:0] + tcp_pseudo_add_result[15:0];
389                       assign tcp_pseudo_result_b = tcp_pseudo_result_a[16] + tcp_pseudo_result_a[15:0];
390                     /*
391                       reg [15:0]  tcp_pseudo_result;
392                       always@(posedge hclk or negedge n_hreset)
393                       begin
394                         if (~n_hreset)
395                           tcp_pseudo_result &lt;= 16'h0000;
396                         else
397                           tcp_pseudo_result &lt;= tcp_pseudo_result_b[15:0];
398                       end
399                     */
400                     
401                     // Now add the actual final result in ...
402                     // tcp_hdr_payload_result holds the CSUM covering the TCP header
403                     wire [15:0] tcp_hdr_payload_result;
404                      edma_csum #( .SKIP_OVER_CSUM(1'b1)) i_edma_tcp_csum (
405                     
406                         .host_clk                (hclk),
407                         .host_rst_n              (n_hreset),
408                     
409                         .tx_r_data               (dpram_din_d1),
410                         .tx_r_eop                (dpram_eop_d1),
411                         .tx_r_err                (1'b0),
412                         .tx_r_valid              (dpram_we_d1),
413                     
414                         .csum_start_offset       (l4_hdr_offst),
415                         .running_byte_count      (running_byte_count),
416                         .tx_e_valid              (dpram_we),
417                         .csum_offset             ({3'b000,tcp_csum_offset[12:0]}),
418                         .csum_end_offset         (end_of_tcpudp_pld_offset),
419                         .dma_bus_width           (dma_bus_width),
420                     
421                         .csum                    (tcp_hdr_payload_result),
422                         .csum_vld                (tcp_offload_valid)
423                       );
424                     
425                       // Add it in here ....
426                       wire [16:0] tcp_csum_result_a;
427                       assign tcp_csum_result_a  = tcp_pseudo_result_b[15:0] +
428                                                    {tcp_hdr_payload_result[7:0],tcp_hdr_payload_result[15:8]};
429                     
430                       wire [16:0] tcp_csum_result;
431                       assign tcp_csum_result = tcp_csum_result_a[15:0] + tcp_csum_result_a[16];
432                     
433                       // Zero checksums are not allowed in IPv6, so convert to FFFF
434                       reg [15:0] final_tcp_res;
435                       wire [1:0] final_tcp_res_par;  // if parity protection defined generate parity and pass using this wire
436                       always @(*)
437                       begin
438        1/1              if (&amp;tcp_csum_result[15:0] &amp; l4_udp_hdr_detected &amp; ~ipv4_frame_detected)
439        <font color = "red">0/1     ==>        final_tcp_res = tcp_csum_result[15:0];</font>
440                         else
441        1/1                final_tcp_res = ~tcp_csum_result[15:0];
442                       end
443                     
444                       // Take a note of the DPRAM address to which the
445                       // checksums are located for future writebacks
446                       // In the case of the IPV4_ checksum, this occurs during the
447                       // IPV4_6 state.  There is a 1 cycle latency between the dpram_we
448                       // and tx_ena and the address is post incremented
449                       reg    [13:0]       stripe_num;
450                       reg    [13:0]       tcp_csum_stripe;
451                       reg    [3:0]        tcp_csum_bytes;
452                       reg    [13:0]       ipv4_csum_stripe;
453                       reg    [3:0]        ipv4_csum_bytes;
454                       always @(*)
455                       begin
456        1/1              if (dma_bus_width == 2'b00)
457                         begin
458        1/1                stripe_num           = running_byte_count[15:2];
459        1/1                tcp_csum_stripe      = {3'h0, tcp_csum_offset[12:2]} ;
460        1/1                tcp_csum_bytes       = {2'h0, tcp_csum_offset[1:0]} ;
461        1/1                ipv4_csum_stripe     = {9'd0, ipv4_csum_offset[6:2]} ;
462        1/1                ipv4_csum_bytes      = {2'h0, ipv4_csum_offset[1:0]} ;
463                         end
464        <font color = "red">0/1     ==>      else if (dma_bus_width == 2'b01)</font>
465                         begin
466        <font color = "red">0/1     ==>        stripe_num           = {1'b0, running_byte_count[15:3]};</font>
467        <font color = "red">0/1     ==>        tcp_csum_stripe      = {4'h0, tcp_csum_offset[12:3]} ;</font>
468        <font color = "red">0/1     ==>        tcp_csum_bytes       = {1'b0, tcp_csum_offset[2:0]} ;</font>
469        <font color = "red">0/1     ==>        ipv4_csum_stripe     = {10'd0,ipv4_csum_offset[6:3]} ;</font>
470        <font color = "red">0/1     ==>        ipv4_csum_bytes      = {1'b0, ipv4_csum_offset[2:0]} ;</font>
471                         end
472                         else
473                         begin
474        <font color = "red">0/1     ==>        stripe_num           = {2'b00,running_byte_count[15:4]};</font>
475        <font color = "red">0/1     ==>        tcp_csum_stripe      = {5'h00,tcp_csum_offset[12:4]};</font>
476        <font color = "red">0/1     ==>        tcp_csum_bytes       = tcp_csum_offset[3:0];</font>
477        <font color = "red">0/1     ==>        ipv4_csum_stripe     = {11'd0,ipv4_csum_offset[6:4]};</font>
478        <font color = "red">0/1     ==>        ipv4_csum_bytes      = ipv4_csum_offset[3:0];</font>
479                         end
480                       end
481                       assign dpram_din_i[127:0]     = { dpram_din[119:112],dpram_din[127:120],
482                                                         dpram_din[103:96],dpram_din[111:104],
483                                                         dpram_din[87:80], dpram_din[95:88],
484                                                         dpram_din[71:64], dpram_din[79:72],
485                                                         dpram_din[55:48], dpram_din[63:56],
486                                                         dpram_din[39:32], dpram_din[47:40],
487                                                         dpram_din[23:16], dpram_din[31:24],
488                                                         dpram_din[7:0],   dpram_din[15:8]};
489                       assign dpram_din_par_i[15:0]  = { dpram_din_par[14],dpram_din_par[15],
490                                                         dpram_din_par[12],dpram_din_par[13],
491                                                         dpram_din_par[10],dpram_din_par[11],
492                                                         dpram_din_par[8], dpram_din_par[9],
493                                                         dpram_din_par[6], dpram_din_par[7],
494                                                         dpram_din_par[4], dpram_din_par[5],
495                                                         dpram_din_par[2], dpram_din_par[3],
496                                                         dpram_din_par[0], dpram_din_par[1]};
497                     
498                     
499                       assign tcp_status = {3{tx_pbuf_tcp_en}} &amp; tcp_status_c;
500                     
501                       always@(*)
502                       begin
503        1/1              tcp_hdr_cs_nxt      = tcp_hdr_cs;
504        1/1              tcp_hdr_cs_par_nxt  = tcp_hdr_cs_par;
505                     
506        1/1              if (stripe_num == tcp_csum_stripe &amp; dpram_we)
507                         begin
508        1/1                case (tcp_csum_bytes)
509                             4'd0    : begin
510        1/1                              tcp_hdr_cs_nxt[127:16]    = dpram_din_i[127:16];
511        1/1                              tcp_hdr_cs_par_nxt[15:2]  = dpram_din_par_i[15:2];
512                                       end
513                             4'd2    : begin
514        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[127:32]    = dpram_din_i[127:32];</font>
515        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[15:0]      = dpram_din_i[15:0];</font>
516        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[15:4]  = dpram_din_par_i[15:4];</font>
517        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[1:0]   = dpram_din_par_i[1:0];</font>
518                                       end
519                             4'd4    : begin
520        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[127:48]    = dpram_din_i[127:48];</font>
521        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[31:0]      = dpram_din_i[31:0];</font>
522        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[15:6]  = dpram_din_par_i[15:6];</font>
523        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[3:0]   = dpram_din_par_i[3:0];</font>
524                                       end
525                             4'd6    : begin
526        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[127:64]    = dpram_din_i[127:64];</font>
527        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[47:0]      = dpram_din_i[47:0];</font>
528        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[15:8]  = dpram_din_par_i[15:8];</font>
529        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[5:0]   = dpram_din_par_i[5:0];</font>
530                                       end
531                             4'd8    : begin
532        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[127:80]    = dpram_din_i[127:80];</font>
533        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[63:0]      = dpram_din_i[63:0];</font>
534        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[15:10] = dpram_din_par_i[15:10];</font>
535        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[7:0]   = dpram_din_par_i[7:0];</font>
536                                       end
537                             4'd10   : begin
538        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[127:96]    = dpram_din_i[127:96];</font>
539        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[79:0]      = dpram_din_i[79:0];</font>
540        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[15:12] = dpram_din_par_i[15:12];</font>
541        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[9:0]   = dpram_din_par_i[9:0];</font>
542                                       end
543                             4'd12   : begin
544        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[127:112]   = dpram_din_i[127:112];</font>
545        <font color = "red">0/1     ==>                      tcp_hdr_cs_nxt[95:0]      = dpram_din_i[95:0];</font>
546        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[15:14] = dpram_din_par_i[15:14];</font>
547        <font color = "red">0/1     ==>                      tcp_hdr_cs_par_nxt[11:0]  = dpram_din_par_i[11:0];</font>
548                                       end
549                             default : begin
550        1/1                              tcp_hdr_cs_nxt[111:0]     = dpram_din_i[111:0];
551        1/1                              tcp_hdr_cs_par_nxt[13:0]  = dpram_din_par_i[13:0];
552                                       end
553                           endcase
554                         end
555                         else
556                         begin
557        1/1                if (tcp_offload_valid)
558                           begin
559        1/1                  case (tcp_csum_bytes)
560                               4'd0    : begin
561        1/1                                tcp_hdr_cs_nxt[15:0]    = final_tcp_res;
562        1/1                                tcp_hdr_cs_par_nxt[1:0] = final_tcp_res_par;
563                                         end
564                               4'd2    : begin
565        <font color = "red">0/1     ==>                        tcp_hdr_cs_nxt[31:16]   = final_tcp_res;</font>
566        <font color = "red">0/1     ==>                        tcp_hdr_cs_par_nxt[3:2] = final_tcp_res_par;</font>
567                                         end
568                               4'd4    : begin
569        <font color = "red">0/1     ==>                        tcp_hdr_cs_nxt[47:32]   = final_tcp_res;</font>
570        <font color = "red">0/1     ==>                        tcp_hdr_cs_par_nxt[5:4] = final_tcp_res_par;</font>
571                                         end
572                               4'd6    : begin
573        <font color = "red">0/1     ==>                        tcp_hdr_cs_nxt[63:48]   = final_tcp_res;</font>
574        <font color = "red">0/1     ==>                        tcp_hdr_cs_par_nxt[7:6] = final_tcp_res_par;</font>
575                                         end
576                               4'd8    : begin
577        <font color = "red">0/1     ==>                        tcp_hdr_cs_nxt[79:64]   = final_tcp_res;</font>
578        <font color = "red">0/1     ==>                        tcp_hdr_cs_par_nxt[9:8] = final_tcp_res_par;</font>
579                                         end
580                               4'd10   : begin
581        <font color = "red">0/1     ==>                        tcp_hdr_cs_nxt[95:80]     = final_tcp_res;</font>
582        <font color = "red">0/1     ==>                        tcp_hdr_cs_par_nxt[11:10] = final_tcp_res_par;</font>
583                                         end
584                               4'd12   : begin
585        <font color = "red">0/1     ==>                        tcp_hdr_cs_nxt[111:96]    = final_tcp_res;</font>
586        <font color = "red">0/1     ==>                        tcp_hdr_cs_par_nxt[13:12] = final_tcp_res_par;</font>
587                                         end
588                               default : begin
589        <font color = "red">0/1     ==>                        tcp_hdr_cs_nxt[127:112]   = final_tcp_res;</font>
590        <font color = "red">0/1     ==>                        tcp_hdr_cs_par_nxt[15:14] = final_tcp_res_par;</font>
591                                         end
592                             endcase
593                           end
                        MISSING_ELSE
594                         end
595                       end
596                       always@(*)
597                       begin
598        1/1              ip_hdr_cs_nxt     = ip_hdr_cs;
599        1/1              ip_hdr_cs_par_nxt = ip_hdr_cs_par;
600                     
601        1/1              if (stripe_num == ipv4_csum_stripe &amp; dpram_we)
602                         begin
603        1/1                case (ipv4_csum_bytes)
604                             4'd0    : begin
605        1/1                              ip_hdr_cs_nxt[127:16]     = dpram_din_i[127:16];
606        1/1                              ip_hdr_cs_par_nxt[15:2]   = dpram_din_par_i[15:2];
607                                       end
608                             4'd4    : begin
609        <font color = "red">0/1     ==>                      ip_hdr_cs_nxt[127:48]     = dpram_din_i[127:48];</font>
610        <font color = "red">0/1     ==>                      ip_hdr_cs_nxt[31:0]       = dpram_din_i[31:0];</font>
611        <font color = "red">0/1     ==>                      ip_hdr_cs_par_nxt[15:6]   = dpram_din_par_i[15:6];</font>
612        <font color = "red">0/1     ==>                      ip_hdr_cs_par_nxt[3:0]    = dpram_din_par_i[3:0];</font>
613                                       end
614                             4'd8    : begin
615        <font color = "red">0/1     ==>                      ip_hdr_cs_nxt[127:80]     = dpram_din_i[127:80];</font>
616        <font color = "red">0/1     ==>                      ip_hdr_cs_nxt[63:0]       = dpram_din_i[63:0];</font>
617        <font color = "red">0/1     ==>                      ip_hdr_cs_par_nxt[15:10]  = dpram_din_par_i[15:10];</font>
618        <font color = "red">0/1     ==>                      ip_hdr_cs_par_nxt[7:0]    = dpram_din_par_i[7:0];</font>
619                                       end
620                             default   : begin
621        <font color = "red">0/1     ==>                        ip_hdr_cs_nxt[127:112]    = dpram_din_i[127:112];</font>
622        <font color = "red">0/1     ==>                        ip_hdr_cs_nxt[95:0]       = dpram_din_i[95:0];</font>
623        <font color = "red">0/1     ==>                        ip_hdr_cs_par_nxt[15:14]  = dpram_din_par_i[15:14];</font>
624        <font color = "red">0/1     ==>                        ip_hdr_cs_par_nxt[11:0]   = dpram_din_par_i[11:0];</font>
625                                         end
626                           endcase
627                         end
628                         else
629                         begin
630        1/1                if (ipv4_offload_valid)
631                           begin
632        1/1                  case (ipv4_csum_bytes)
633                               4'd0    : begin
634        1/1                                ip_hdr_cs_nxt[15 :0]      = {ipv4_result[7:0],ipv4_result[15:8]};
635        1/1                                ip_hdr_cs_par_nxt[1:0]    = {ipv4_result_par[0],ipv4_result_par[1]};
636                                         end
637                               4'd4    : begin
638        <font color = "red">0/1     ==>                        ip_hdr_cs_nxt[47 :32]     = {ipv4_result[7:0],ipv4_result[15:8]};</font>
639        <font color = "red">0/1     ==>                        ip_hdr_cs_par_nxt[5:4]    = {ipv4_result_par[0],ipv4_result_par[1]};</font>
640                                         end
641                               4'd8    : begin
642        <font color = "red">0/1     ==>                        ip_hdr_cs_nxt[79 :64]     = {ipv4_result[7:0],ipv4_result[15:8]};</font>
643        <font color = "red">0/1     ==>                        ip_hdr_cs_par_nxt[9:8]    = {ipv4_result_par[0],ipv4_result_par[1]};</font>
644                                         end
645                               default : begin
646        <font color = "red">0/1     ==>                        ip_hdr_cs_nxt[111:96]     = {ipv4_result[7:0],ipv4_result[15:8]};</font>
647        <font color = "red">0/1     ==>                        ip_hdr_cs_par_nxt[13:12]  = {ipv4_result_par[0],ipv4_result_par[1]};</font>
648                                         end
649                             endcase
650                           end
                        MISSING_ELSE
651                         end
652                       end
653                     
654                       always@(posedge hclk or negedge n_hreset)
655                       begin
656        1/1              if (~n_hreset)
657                         begin
658        1/1                tcp_hdr_cs_addr    &lt;= {p_edma_tx_pbuf_addr{1'b0}};
659        1/1                tcp_hdr_cs         &lt;= 128'd0;
660        1/1                ip_hdr_cs_addr     &lt;= {p_edma_tx_pbuf_addr{1'b0}};
661        1/1                ip_hdr_cs          &lt;= 128'd0;
662        1/1                ip_cs_locn_d1      &lt;= 1'b0;
663        1/1                tcp_cs_locn_d1     &lt;= 1'b0;
664        1/1                tcp_hdr_cs_we      &lt;= 1'b0;
665        1/1                ip_hdr_cs_we       &lt;= 1'b0;
666                         end
667                         else
668                         begin
669                           // the ip_hdr_cs_we and tcp_hdr_cs_we signals are passed to the underlying DMA to identify when a valid
670                           // IP checksum or TCP checksum should be inserted.  Under normal conditions the signals will be set
671                           // when an IP or TCp header has been decoded, and reset at the start of the next new frame (man_rd_new_pkt)
672                           // For non SPRAM configurations,  the stripe of data that the checksum bytes were located on was writte to
673                           // previously, and therefore will be overwritten with the checksum + existing stripe (i.e. the existing stripe
674                           // is buffered locally). if there has been an error during the decoding, we can clear the ip_hdr_cs_we and
675                           // tcp_hdr_cs_we signals to avoid the underlying DMA from writing the checksums into an errored frame.
676                           // For SPRAM configs, the stripe of data that the checksum bytes were located on was NOT
677                           // previously written.  It is therefore mandatory that the stripe is written following the detection of
678                           // an IP/TCP header, even if there was an error detected ...
679                           //
680        1/1                if (man_rd_new_pkt)
681        1/1                  ip_hdr_cs_we &lt;= 1'b0;
682        1/1                else if (tx_pbuf_tcp_en &amp;
683                                   ((tcp_status == NO_ERROR | tcp_status == IPV4_ONLY | tcp_status == PKT_FRAGMENTED) &amp; ipv4_frame_detected))
684                           begin
685        <font color = "red">0/1     ==>          if (ipv4_offload_valid)</font>
686        <font color = "red">0/1     ==>            ip_hdr_cs_we &lt;= 1'b1;</font>
                   <font color = "red">==>  MISSING_ELSE</font>
687                           end
688        1/1                else if (p_edma_spram == 0)
689        1/1                  ip_hdr_cs_we &lt;= 1'b0;
                   <font color = "red">==>  MISSING_ELSE</font>
690                     
691        1/1                if (man_rd_new_pkt)
692        1/1                  tcp_hdr_cs_we &lt;= 1'b0;
693        1/1                else if (tx_pbuf_tcp_en &amp;
694                                   (tcp_status == NO_ERROR &amp; (l4_tcp_hdr_detected | l4_udp_hdr_detected)))
695                           begin
696        <font color = "red">0/1     ==>          if (tcp_offload_valid)</font>
697        <font color = "red">0/1     ==>            tcp_hdr_cs_we &lt;= 1'b1;</font>
                   <font color = "red">==>  MISSING_ELSE</font>
698                           end
699        1/1                else if (p_edma_spram == 0)
700        1/1                  tcp_hdr_cs_we &lt;= 1'b0;
                   <font color = "red">==>  MISSING_ELSE</font>
701                     
702        1/1                tcp_hdr_cs  &lt;= tcp_hdr_cs_nxt;
703        1/1                if (stripe_num == tcp_csum_stripe &amp; dpram_we)
704        1/1                  tcp_cs_locn_d1  &lt;= 1'b1;
705                           else
706        1/1                  tcp_cs_locn_d1  &lt;= 1'b0;
707                     
708        1/1                ip_hdr_cs &lt;= ip_hdr_cs_nxt;
709        1/1                if (stripe_num == ipv4_csum_stripe &amp; dpram_we)
710        1/1                  ip_cs_locn_d1  &lt;= 1'b1;
711                           else
712        1/1                  ip_cs_locn_d1  &lt;= 1'b0;
713                     
714        1/1                if ((p_edma_axi == 1 &amp;&amp; stripe_num == tcp_csum_stripe &amp; dpram_we) ||
715                               (p_edma_axi == 0 &amp;&amp; tcp_cs_locn_d1))
716        1/1                  tcp_hdr_cs_addr &lt;= dpram_addr;
                        MISSING_ELSE
717                     
718        1/1                if ((p_edma_axi == 1 &amp;&amp; stripe_num == ipv4_csum_stripe &amp; dpram_we) ||
719                               (p_edma_axi == 0 &amp;&amp; ip_cs_locn_d1))
720        1/1                  ip_hdr_cs_addr &lt;= dpram_addr;
                        MISSING_ELSE
</pre>
<hr>
<a name="Cond"></a>
Cond Coverage for Module : <a href="mod1779.html" >edma_pbuf_tx_tcp</a><br clear=all>
<table class="noborder">
<col width="122">
<col span="3" width="82">
<tr><th></th><th>Total</th><th>Covered</th><th>Percent</th></tr>
<tr class="s7"><td class="lf">Conditions</td><td>14</td><td>10</td><td>71.43</td></tr>
<tr class="s7"><td class="lf">Logical</td><td>14</td><td>10</td><td>71.43</td></tr>
<tr class="wht"><td class="lf">Non-Logical</td><td>0</td><td>0</td><td></td></tr>
<tr class="wht"><td class="lf">Event</td><td>0</td><td>0</td><td></td></tr>
</table>
<br clear=all>
<pre class="code"> LINE       379
 EXPRESSION (l4_tcp_hdr_detected ? 16'h0006 : 16'h0011)
             ---------1---------
</pre>
<table class="noborder">
<col width="40">
<tr><th>-1-</th><th>Status</th>                      </tr>
<tr class="uGreen"><td>0</td><td class="lf">Covered</td></tr>
<tr class="uRed"><td>1</td><td class="lf">Not Covered</td></tr>
</table>
<br clear=all>
<pre class="code"> LINE       714
 EXPRESSION (((p_edma_axi == 1'b1) &amp;&amp; (((stripe_num == tcp_csum_stripe) &amp; dpram_we))) || (((p_edma_axi == 1'b0) &amp;&amp; tcp_cs_locn_d1)))
             ------------------------------------1-----------------------------------    ---------------------2--------------------
</pre>
<table class="noborder">
<col span="2" width="40">
<tr><th>-1-</th><th>-2-</th><th>Status</th>                      </tr>
<tr class="uGreen"><td>0</td><td>0</td><td class="lf">Covered</td></tr>
<tr class="uRed"><td>0</td><td>1</td><td class="lf">Not Covered</td></tr>
<tr class="uGreen"><td>1</td><td>0</td><td class="lf">Covered</td></tr>
</table>
<br clear=all>
<pre class="code"> LINE       714
 SUB-EXPRESSION ((p_edma_axi == 1'b1) &amp;&amp; (((stripe_num == tcp_csum_stripe) &amp; dpram_we)))
                 ----------1---------    -----------------------2----------------------
</pre>
<table class="noborder">
<col span="2" width="40">
<tr><th>-1-</th><th>-2-</th><th>Status</th>                      </tr>
<tr class="uGreen"><td>-</td><td>0</td><td class="lf">Covered</td></tr>
<tr class="uGreen"><td>-</td><td>1</td><td class="lf">Covered</td></tr>
</table>
<br clear=all>
<pre class="code"> LINE       718
 EXPRESSION (((p_edma_axi == 1'b1) &amp;&amp; (((stripe_num == ipv4_csum_stripe) &amp; dpram_we))) || (((p_edma_axi == 1'b0) &amp;&amp; ip_cs_locn_d1)))
             ------------------------------------1------------------------------------    --------------------2--------------------
</pre>
<table class="noborder">
<col span="2" width="40">
<tr><th>-1-</th><th>-2-</th><th>Status</th>                      </tr>
<tr class="uGreen"><td>0</td><td>0</td><td class="lf">Covered</td></tr>
<tr class="uRed"><td>0</td><td>1</td><td class="lf">Not Covered</td></tr>
<tr class="uGreen"><td>1</td><td>0</td><td class="lf">Covered</td></tr>
</table>
<br clear=all>
<pre class="code"> LINE       718
 SUB-EXPRESSION ((p_edma_axi == 1'b1) &amp;&amp; (((stripe_num == ipv4_csum_stripe) &amp; dpram_we)))
                 ----------1---------    -----------------------2-----------------------
</pre>
<table class="noborder">
<col span="2" width="40">
<tr><th>-1-</th><th>-2-</th><th>Status</th>                      </tr>
<tr class="uGreen"><td>-</td><td>0</td><td class="lf">Covered</td></tr>
<tr class="uGreen"><td>-</td><td>1</td><td class="lf">Covered</td></tr>
</table>
<br clear=all>
<pre class="code"> LINE       724
 EXPRESSION 
 Number  Term
      1  ((!tx_pbuf_tcp_en)) ? 1'b0 : ((((tcp_status == 3'b0) | (tcp_status == 3'b110)) &amp; ((ip_cs_locn_d1 &amp; ipv4_frame_detected) | (tcp_cs_locn_d1 &amp; (l4_tcp_hdr_detected | l4_udp_hdr_detected))))))
</pre>
<table class="noborder">
<col width="40">
<tr><th>-1-</th><th>Status</th>                      </tr>
<tr class="uRed"><td>0</td><td class="lf">Not Covered</td></tr>
<tr class="uGreen"><td>1</td><td class="lf">Covered</td></tr>
</table>
<hr>
<a name="Toggle"></a>
Toggle Coverage for Module : <a href="mod1779.html" >edma_pbuf_tx_tcp</a><br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=120></th><th nowrap width=80>Total</th><th nowrap width=80>Covered</th><th nowrap width=80>Percent</th></tr><tr class="s1">
<td>Totals</td>
<td class="rt">22</td>
<td class="rt">4</td>
<td class="rt">18.18 </td>
</tr><tr class="s1">
<td>Total Bits</td>
<td class="rt">1204</td>
<td class="rt">216</td>
<td class="rt">17.94 </td>
</tr><tr class="s2">
<td nowrap>Total Bits 0->1</td>
<td class="rt">602</td>
<td class="rt">135</td>
<td class="rt">22.43 </td>
</tr><tr class="s1">
<td nowrap>Total Bits 1->0</td>
<td class="rt">602</td>
<td class="rt">81</td>
<td class="rt">13.46 </td>
</tr></table><br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=120></th><th nowrap width=80></th><th nowrap width=80></th><th nowrap width=80></th></tr><tr class="s1">
<td>Ports</td>
<td class="rt">22</td>
<td class="rt">4</td>
<td class="rt">18.18 </td>
</tr><tr class="s1">
<td>Port Bits</td>
<td class="rt">1204</td>
<td class="rt">216</td>
<td class="rt">17.94 </td>
</tr><tr class="s2">
<td nowrap>Port Bits 0->1</td>
<td class="rt">602</td>
<td class="rt">135</td>
<td class="rt">22.43 </td>
</tr><tr class="s1">
<td nowrap>Port Bits 1->0</td>
<td class="rt">602</td>
<td class="rt">81</td>
<td class="rt">13.46 </td>
</tr></table><br clear=all>
<table align=left class="sortable noborder">
<caption><b>Port Details</b></caption>
<tr class="sortablehead">
<td class="alfsrt">Name</td><td class="alfsrt">Toggle</td><td class="alfsrt">Toggle 1->0</td><td class="alfsrt">Toggle 0->1</td><td class="alfsrt">Direction</td></tr><tr>
<td>hclk</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>INPUT</td>
</tr><tr>
<td>n_hreset</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>INPUT</td>
</tr><tr>
<td>soft_reset</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>dpram_we</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>INPUT</td>
</tr><tr>
<td>dpram_din[31:0]</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>INPUT</td>
</tr><tr>
<td>dpram_din[127:32]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>dpram_din_par[15:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>dpram_din_d1[31:0]</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>INPUT</td>
</tr><tr>
<td>dpram_din_d1[127:32]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>dpram_addr[5:0]</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>INPUT</td>
</tr><tr>
<td>dpram_addr[8:6]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>man_rd_new_pkt</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>INPUT</td>
</tr><tr>
<td>dpram_eop</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>INPUT</td>
</tr><tr>
<td>tx_pbuf_tcp_en</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>dma_bus_width[1:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>ip_hdr_cs_we</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs[0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs[1]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs[3:2]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs[6:4]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs[10:7]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs[12:11]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs[13]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs[14]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs[15]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs[31:16]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs[127:32]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs_par[15:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs_addr[2:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs_addr[3]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>ip_hdr_cs_addr[8:4]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs_we</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs[0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs[1]</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs[19:2]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs[20]</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs[21]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs[23:22]</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs[31:24]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs[127:32]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs_par[15:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs_addr[1:0]</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs_addr[3:2]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_hdr_cs_addr[8:4]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>tcp_status[2:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>tx_ena_abort</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr></table><br clear=all>
<hr>
<a name="Branch"></a>
Branch Coverage for Module : <a href="mod1779.html" >edma_pbuf_tx_tcp</a><br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=120></th><th nowrap width=80>Line No.</th><th nowrap width=80>Total</th><th nowrap width=80>Covered</th><th nowrap width=80>Percent</th></tr><tr class="s4">
<td>Branches</td>
<td></td>
<td class="rt">58</td>
<td class="rt">28</td>
<td class="rt">48.28 </td>
</tr><tr class="s5">
<td>TERNARY</td>
<td class="rt">379</td>
<td class="rt">2</td>
<td class="rt">1</td>
<td class="rt">50.00 </td>
</tr><tr class="s5">
<td>TERNARY</td>
<td class="rt">724</td>
<td class="rt">2</td>
<td class="rt">1</td>
<td class="rt">50.00 </td>
</tr><tr class="s10">
<td>IF</td>
<td class="rt">180</td>
<td class="rt">4</td>
<td class="rt">4</td>
<td class="rt">100.00</td>
</tr><tr class="s5">
<td>IF</td>
<td class="rt">438</td>
<td class="rt">2</td>
<td class="rt">1</td>
<td class="rt">50.00 </td>
</tr><tr class="s3">
<td>IF</td>
<td class="rt">456</td>
<td class="rt">3</td>
<td class="rt">1</td>
<td class="rt">33.33 </td>
</tr><tr class="s2">
<td>IF</td>
<td class="rt">506</td>
<td class="rt">17</td>
<td class="rt">4</td>
<td class="rt">23.53 </td>
</tr><tr class="s3">
<td>IF</td>
<td class="rt">601</td>
<td class="rt">9</td>
<td class="rt">3</td>
<td class="rt">33.33 </td>
</tr><tr class="s6">
<td>IF</td>
<td class="rt">656</td>
<td class="rt">19</td>
<td class="rt">13</td>
<td class="rt">68.42 </td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
379          assign proto_field = l4_tcp_hdr_detected ? 16'h0006 : 16'h0011;
                                                      <font color = "red">-1-</font>  
                                                      <font color = "red">==></font>  
                                                      <font color = "green">==></font>  
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>Status</th></tr><tr class="uRed">
<td align=center>1</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
724          assign tx_ena_abort = !tx_pbuf_tcp_en ? 1'b0 :
                                                   <font color = "red">-1-</font>  
                                                   <font color = "green">==></font>  
                                                   <font color = "red">==></font>  
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td>Not Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
180          if (~n_hreset)
             <font color = "green">-1-</font>  
181          begin
182            sop <= 1'b0;
           <font color = "green">    ==></font>
183            dpram_we_d1 <= 1'b0;
184            dpram_eop_d1 <= 1'b0;
185          end
186          else
187          begin
188            dpram_we_d1 <= dpram_we;
189            dpram_eop_d1 <= dpram_eop;
190            if (man_rd_new_pkt)
               <font color = "green">-2-</font>  
191              sop <= 1'b1;
           <font color = "green">      ==></font>
192            else if (dpram_we)
                    <font color = "green">-3-</font>  
193              sop <= 1'b0;
           <font color = "green">      ==></font>
                 MISSING_ELSE
           <font color = "green">      ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>-3-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
438            if (&tcp_csum_result[15:0] & l4_udp_hdr_detected & ~ipv4_frame_detected)
               <font color = "red">-1-</font>  
439              final_tcp_res = tcp_csum_result[15:0];
           <font color = "red">      ==></font>
440            else
441              final_tcp_res = ~tcp_csum_result[15:0];
           <font color = "green">      ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>Status</th></tr><tr class="uRed">
<td align=center>1</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
456            if (dma_bus_width == 2'b00)
               <font color = "red">-1-</font>  
457            begin
458              stripe_num           = running_byte_count[15:2];
           <font color = "green">      ==></font>
459              tcp_csum_stripe      = {3'h0, tcp_csum_offset[12:2]} ;
460              tcp_csum_bytes       = {2'h0, tcp_csum_offset[1:0]} ;
461              ipv4_csum_stripe     = {9'd0, ipv4_csum_offset[6:2]} ;
462              ipv4_csum_bytes      = {2'h0, ipv4_csum_offset[1:0]} ;
463            end
464            else if (dma_bus_width == 2'b01)
                    <font color = "red">-2-</font>  
465            begin
466              stripe_num           = {1'b0, running_byte_count[15:3]};
           <font color = "red">      ==></font>
467              tcp_csum_stripe      = {4'h0, tcp_csum_offset[12:3]} ;
468              tcp_csum_bytes       = {1'b0, tcp_csum_offset[2:0]} ;
469              ipv4_csum_stripe     = {10'd0,ipv4_csum_offset[6:3]} ;
470              ipv4_csum_bytes      = {1'b0, ipv4_csum_offset[2:0]} ;
471            end
472            else
473            begin
474              stripe_num           = {2'b00,running_byte_count[15:4]};
           <font color = "red">      ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>1</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td>Not Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
506            if (stripe_num == tcp_csum_stripe & dpram_we)
               <font color = "green">-1-</font>  
507            begin
508              case (tcp_csum_bytes)
                 <font color = "red">-2-</font>  
509                4'd0    : begin
510                            tcp_hdr_cs_nxt[127:16]    = dpram_din_i[127:16];
           <font color = "green">                    ==></font>
511                            tcp_hdr_cs_par_nxt[15:2]  = dpram_din_par_i[15:2];
512                          end
513                4'd2    : begin
514                            tcp_hdr_cs_nxt[127:32]    = dpram_din_i[127:32];
           <font color = "red">                    ==></font>
515                            tcp_hdr_cs_nxt[15:0]      = dpram_din_i[15:0];
516                            tcp_hdr_cs_par_nxt[15:4]  = dpram_din_par_i[15:4];
517                            tcp_hdr_cs_par_nxt[1:0]   = dpram_din_par_i[1:0];
518                          end
519                4'd4    : begin
520                            tcp_hdr_cs_nxt[127:48]    = dpram_din_i[127:48];
           <font color = "red">                    ==></font>
521                            tcp_hdr_cs_nxt[31:0]      = dpram_din_i[31:0];
522                            tcp_hdr_cs_par_nxt[15:6]  = dpram_din_par_i[15:6];
523                            tcp_hdr_cs_par_nxt[3:0]   = dpram_din_par_i[3:0];
524                          end
525                4'd6    : begin
526                            tcp_hdr_cs_nxt[127:64]    = dpram_din_i[127:64];
           <font color = "red">                    ==></font>
527                            tcp_hdr_cs_nxt[47:0]      = dpram_din_i[47:0];
528                            tcp_hdr_cs_par_nxt[15:8]  = dpram_din_par_i[15:8];
529                            tcp_hdr_cs_par_nxt[5:0]   = dpram_din_par_i[5:0];
530                          end
531                4'd8    : begin
532                            tcp_hdr_cs_nxt[127:80]    = dpram_din_i[127:80];
           <font color = "red">                    ==></font>
533                            tcp_hdr_cs_nxt[63:0]      = dpram_din_i[63:0];
534                            tcp_hdr_cs_par_nxt[15:10] = dpram_din_par_i[15:10];
535                            tcp_hdr_cs_par_nxt[7:0]   = dpram_din_par_i[7:0];
536                          end
537                4'd10   : begin
538                            tcp_hdr_cs_nxt[127:96]    = dpram_din_i[127:96];
           <font color = "red">                    ==></font>
539                            tcp_hdr_cs_nxt[79:0]      = dpram_din_i[79:0];
540                            tcp_hdr_cs_par_nxt[15:12] = dpram_din_par_i[15:12];
541                            tcp_hdr_cs_par_nxt[9:0]   = dpram_din_par_i[9:0];
542                          end
543                4'd12   : begin
544                            tcp_hdr_cs_nxt[127:112]   = dpram_din_i[127:112];
           <font color = "red">                    ==></font>
545                            tcp_hdr_cs_nxt[95:0]      = dpram_din_i[95:0];
546                            tcp_hdr_cs_par_nxt[15:14] = dpram_din_par_i[15:14];
547                            tcp_hdr_cs_par_nxt[11:0]  = dpram_din_par_i[11:0];
548                          end
549                default : begin
550                            tcp_hdr_cs_nxt[111:0]     = dpram_din_i[111:0];
           <font color = "green">                    ==></font>
551                            tcp_hdr_cs_par_nxt[13:0]  = dpram_din_par_i[13:0];
552                          end
553              endcase
554            end
555            else
556            begin
557              if (tcp_offload_valid)
                 <font color = "green">-3-</font>  
558              begin
559                case (tcp_csum_bytes)
                   <font color = "red">-4-</font>  
560                  4'd0    : begin
561                              tcp_hdr_cs_nxt[15:0]    = final_tcp_res;
           <font color = "green">                      ==></font>
562                              tcp_hdr_cs_par_nxt[1:0] = final_tcp_res_par;
563                            end
564                  4'd2    : begin
565                              tcp_hdr_cs_nxt[31:16]   = final_tcp_res;
           <font color = "red">                      ==></font>
566                              tcp_hdr_cs_par_nxt[3:2] = final_tcp_res_par;
567                            end
568                  4'd4    : begin
569                              tcp_hdr_cs_nxt[47:32]   = final_tcp_res;
           <font color = "red">                      ==></font>
570                              tcp_hdr_cs_par_nxt[5:4] = final_tcp_res_par;
571                            end
572                  4'd6    : begin
573                              tcp_hdr_cs_nxt[63:48]   = final_tcp_res;
           <font color = "red">                      ==></font>
574                              tcp_hdr_cs_par_nxt[7:6] = final_tcp_res_par;
575                            end
576                  4'd8    : begin
577                              tcp_hdr_cs_nxt[79:64]   = final_tcp_res;
           <font color = "red">                      ==></font>
578                              tcp_hdr_cs_par_nxt[9:8] = final_tcp_res_par;
579                            end
580                  4'd10   : begin
581                              tcp_hdr_cs_nxt[95:80]     = final_tcp_res;
           <font color = "red">                      ==></font>
582                              tcp_hdr_cs_par_nxt[11:10] = final_tcp_res_par;
583                            end
584                  4'd12   : begin
585                              tcp_hdr_cs_nxt[111:96]    = final_tcp_res;
           <font color = "red">                      ==></font>
586                              tcp_hdr_cs_par_nxt[13:12] = final_tcp_res_par;
587                            end
588                  default : begin
589                              tcp_hdr_cs_nxt[127:112]   = final_tcp_res;
           <font color = "red">                      ==></font>
590                              tcp_hdr_cs_par_nxt[15:14] = final_tcp_res_par;
591                            end
592                endcase
593              end
                 MISSING_ELSE
           <font color = "green">      ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>-3-</th><th nowrap width=80>-4-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td align=center>4'b0 </td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>4'd2 </td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>4'd4 </td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>4'd6 </td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>4'd8 </td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>4'd10 </td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>4'd12 </td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>1</td>
<td align=center>default</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>4'b0 </td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>4'd2 </td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>4'd4 </td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>4'd6 </td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>4'd8 </td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>4'd10 </td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>4'd12 </td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>default</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
601            if (stripe_num == ipv4_csum_stripe & dpram_we)
               <font color = "green">-1-</font>  
602            begin
603              case (ipv4_csum_bytes)
                 <font color = "red">-2-</font>  
604                4'd0    : begin
605                            ip_hdr_cs_nxt[127:16]     = dpram_din_i[127:16];
           <font color = "green">                    ==></font>
606                            ip_hdr_cs_par_nxt[15:2]   = dpram_din_par_i[15:2];
607                          end
608                4'd4    : begin
609                            ip_hdr_cs_nxt[127:48]     = dpram_din_i[127:48];
           <font color = "red">                    ==></font>
610                            ip_hdr_cs_nxt[31:0]       = dpram_din_i[31:0];
611                            ip_hdr_cs_par_nxt[15:6]   = dpram_din_par_i[15:6];
612                            ip_hdr_cs_par_nxt[3:0]    = dpram_din_par_i[3:0];
613                          end
614                4'd8    : begin
615                            ip_hdr_cs_nxt[127:80]     = dpram_din_i[127:80];
           <font color = "red">                    ==></font>
616                            ip_hdr_cs_nxt[63:0]       = dpram_din_i[63:0];
617                            ip_hdr_cs_par_nxt[15:10]  = dpram_din_par_i[15:10];
618                            ip_hdr_cs_par_nxt[7:0]    = dpram_din_par_i[7:0];
619                          end
620                default   : begin
621                              ip_hdr_cs_nxt[127:112]    = dpram_din_i[127:112];
           <font color = "red">                      ==></font>
622                              ip_hdr_cs_nxt[95:0]       = dpram_din_i[95:0];
623                              ip_hdr_cs_par_nxt[15:14]  = dpram_din_par_i[15:14];
624                              ip_hdr_cs_par_nxt[11:0]   = dpram_din_par_i[11:0];
625                            end
626              endcase
627            end
628            else
629            begin
630              if (ipv4_offload_valid)
                 <font color = "green">-3-</font>  
631              begin
632                case (ipv4_csum_bytes)
                   <font color = "red">-4-</font>  
633                  4'd0    : begin
634                              ip_hdr_cs_nxt[15 :0]      = {ipv4_result[7:0],ipv4_result[15:8]};
           <font color = "green">                      ==></font>
635                              ip_hdr_cs_par_nxt[1:0]    = {ipv4_result_par[0],ipv4_result_par[1]};
636                            end
637                  4'd4    : begin
638                              ip_hdr_cs_nxt[47 :32]     = {ipv4_result[7:0],ipv4_result[15:8]};
           <font color = "red">                      ==></font>
639                              ip_hdr_cs_par_nxt[5:4]    = {ipv4_result_par[0],ipv4_result_par[1]};
640                            end
641                  4'd8    : begin
642                              ip_hdr_cs_nxt[79 :64]     = {ipv4_result[7:0],ipv4_result[15:8]};
           <font color = "red">                      ==></font>
643                              ip_hdr_cs_par_nxt[9:8]    = {ipv4_result_par[0],ipv4_result_par[1]};
644                            end
645                  default : begin
646                              ip_hdr_cs_nxt[111:96]     = {ipv4_result[7:0],ipv4_result[15:8]};
           <font color = "red">                      ==></font>
647                              ip_hdr_cs_par_nxt[13:12]  = {ipv4_result_par[0],ipv4_result_par[1]};
648                            end
649                endcase
650              end
                 MISSING_ELSE
           <font color = "green">      ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>-3-</th><th nowrap width=80>-4-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td align=center>4'b0 </td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>4'd4 </td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>4'd8 </td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>default</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>4'b0 </td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>4'd4 </td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>4'd8 </td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>default</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
656            if (~n_hreset)
               <font color = "green">-1-</font>  
657            begin
658              tcp_hdr_cs_addr    <= {p_edma_tx_pbuf_addr{1'b0}};
           <font color = "green">      ==></font>
659              tcp_hdr_cs         <= 128'd0;
660              ip_hdr_cs_addr     <= {p_edma_tx_pbuf_addr{1'b0}};
661              ip_hdr_cs          <= 128'd0;
662              ip_cs_locn_d1      <= 1'b0;
663              tcp_cs_locn_d1     <= 1'b0;
664              tcp_hdr_cs_we      <= 1'b0;
665              ip_hdr_cs_we       <= 1'b0;
666            end
667            else
668            begin
669              // the ip_hdr_cs_we and tcp_hdr_cs_we signals are passed to the underlying DMA to identify when a valid
670              // IP checksum or TCP checksum should be inserted.  Under normal conditions the signals will be set
671              // when an IP or TCp header has been decoded, and reset at the start of the next new frame (man_rd_new_pkt)
672              // For non SPRAM configurations,  the stripe of data that the checksum bytes were located on was writte to
673              // previously, and therefore will be overwritten with the checksum + existing stripe (i.e. the existing stripe
674              // is buffered locally). if there has been an error during the decoding, we can clear the ip_hdr_cs_we and
675              // tcp_hdr_cs_we signals to avoid the underlying DMA from writing the checksums into an errored frame.
676              // For SPRAM configs, the stripe of data that the checksum bytes were located on was NOT
677              // previously written.  It is therefore mandatory that the stripe is written following the detection of
678              // an IP/TCP header, even if there was an error detected ...
679              //
680              if (man_rd_new_pkt)
                 <font color = "green">-2-</font>  
681                ip_hdr_cs_we <= 1'b0;
           <font color = "green">        ==></font>
682              else if (tx_pbuf_tcp_en &
                      <font color = "red">-3-</font>  
683                      ((tcp_status == NO_ERROR | tcp_status == IPV4_ONLY | tcp_status == PKT_FRAGMENTED) & ipv4_frame_detected))
684              begin
685                if (ipv4_offload_valid)
                   <font color = "red">-4-</font>  
686                  ip_hdr_cs_we <= 1'b1;
           <font color = "red">          ==></font>
                     MISSING_ELSE
           <font color = "red">          ==></font>
687              end
688              else if (p_edma_spram == 0)
                      <font color = "red">-5-</font>  
689                ip_hdr_cs_we <= 1'b0;
           <font color = "green">        ==></font>
                   MISSING_ELSE
           <font color = "red">        ==></font>
690        
691              if (man_rd_new_pkt)
                 <font color = "green">-6-</font>  
692                tcp_hdr_cs_we <= 1'b0;
           <font color = "green">        ==></font>
693              else if (tx_pbuf_tcp_en &
                      <font color = "red">-7-</font>  
694                      (tcp_status == NO_ERROR & (l4_tcp_hdr_detected | l4_udp_hdr_detected)))
695              begin
696                if (tcp_offload_valid)
                   <font color = "red">-8-</font>  
697                  tcp_hdr_cs_we <= 1'b1;
           <font color = "red">          ==></font>
                     MISSING_ELSE
           <font color = "red">          ==></font>
698              end
699              else if (p_edma_spram == 0)
                      <font color = "red">-9-</font>  
700                tcp_hdr_cs_we <= 1'b0;
           <font color = "green">        ==></font>
                   MISSING_ELSE
           <font color = "red">        ==></font>
701        
702              tcp_hdr_cs  <= tcp_hdr_cs_nxt;
703              if (stripe_num == tcp_csum_stripe & dpram_we)
                 <font color = "green">-10-</font>  
704                tcp_cs_locn_d1  <= 1'b1;
           <font color = "green">        ==></font>
705              else
706                tcp_cs_locn_d1  <= 1'b0;
           <font color = "green">        ==></font>
707        
708              ip_hdr_cs <= ip_hdr_cs_nxt;
709              if (stripe_num == ipv4_csum_stripe & dpram_we)
                 <font color = "green">-11-</font>  
710                ip_cs_locn_d1  <= 1'b1;
           <font color = "green">        ==></font>
711              else
712                ip_cs_locn_d1  <= 1'b0;
           <font color = "green">        ==></font>
713        
714              if ((p_edma_axi == 1 && stripe_num == tcp_csum_stripe & dpram_we) ||
                 <font color = "green">-12-</font>  
715                  (p_edma_axi == 0 && tcp_cs_locn_d1))
716                tcp_hdr_cs_addr <= dpram_addr;
           <font color = "green">        ==></font>
                   MISSING_ELSE
           <font color = "green">        ==></font>
717        
718              if ((p_edma_axi == 1 && stripe_num == ipv4_csum_stripe & dpram_we) ||
                 <font color = "green">-13-</font>  
719                  (p_edma_axi == 0 && ip_cs_locn_d1))
720                ip_hdr_cs_addr <= dpram_addr;
           <font color = "green">        ==></font>
                   MISSING_ELSE
           <font color = "green">        ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>-3-</th><th nowrap width=80>-4-</th><th nowrap width=80>-5-</th><th nowrap width=80>-6-</th><th nowrap width=80>-7-</th><th nowrap width=80>-8-</th><th nowrap width=80>-9-</th><th nowrap width=80>-10-</th><th nowrap width=80>-11-</th><th nowrap width=80>-12-</th><th nowrap width=80>-13-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
</div>
</div>
<div class="ui-layout-center-inner-north">
<div id="center-bread-crumb" class="breadCrumb module urg-margin-bottom">
  <ul name="tag_edma_pbuf_tx_tcp">
    <li>
      <a href="#Line">Line</a>    </li>
    <li>
      <a href="#Cond">Cond</a>    </li>
    <li>
      <a href="#Toggle">Toggle</a>    </li>
    <li>
      <a href="#Branch">Branch</a>    </li>
  </ul>
</div>
</div>
</div>
<div class="ui-layout-south">
<table align=center><tr><td class="s0 cl">0%</td>
<td class="s1 cl">10%</td>
<td class="s2 cl">20%</td>
<td class="s3 cl">30%</td>
<td class="s4 cl">40%</td>
<td class="s5 cl">50%</td>
<td class="s6 cl">60%</td>
<td class="s7 cl">70%</td>
<td class="s8 cl">80%</td>
<td class="s9 cl">90%</td>
<td class="s10 cl">100%</td></tr></table></div>
</body>
</html>
