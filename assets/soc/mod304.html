<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Author" content="<username>"> <meta name="GENERATOR" content="urg/version [en] (platform name) [urg]">
<title>Unified Coverage Report :: Module :: gem_tsu</title>
<link type="text/css" rel="stylesheet" href="css/.urg.css">
<link type="text/css" rel="stylesheet" href="css/.layout.css">
<link type="text/css" rel="stylesheet" href="css/.breadcrumb.css">
<script type="text/javascript" src="js/.jquery.js"></script>
<script type="text/javascript" src="js/.jquery-ui.js"></script>
<script type="text/javascript" src="js/.sortable.js"></script>
<script type="text/javascript" src="js/.layout.js"></script>
<script type="text/javascript" src="js/.breadcrumb.js"></script>
<script type="text/javascript">
var layout, westLayout, centerLayout;
$(document).ready(function () {
  if ($("#north-bread-crumb")) {
    $("#north-bread-crumb").jBreadCrumb({easing:'swing'})
  }
  layout = $("body").layout({ 
    resizable: true,
    spacing_open: 4,
    spacing_closed: 4,
    north: {
      size: 76
    },
    south: {
      size: 45,
      initClosed: true
    },
    west: {
      size: 500,
      resizable: true,
      initClosed: false
    }
  });
  centerLayout = $('div.ui-layout-center').layout({
    north__paneSelector: ".ui-layout-center-inner-north",
    center__paneSelector: ".ui-layout-center-inner-center", 
    north__size: 50,
    spacing_open: 4,
    spacing_closed: 4
  });
});
</script>
</head>
<body onLoad="initPage();"><div class="ui-layout-north">
<div class="logo"></div>
<center class="pagetitle">Module Definition</center>
<div align="center"><a href="dashboard.html" ><b>dashboard</b></a> | <a href="hierarchy.html" ><b>hierarchy</b></a> | <a href="modlist.html" ><b>modlist</b></a> | groups | <a href="tests.html" ><b>tests</b></a> | <a href="asserts.html" ><b>asserts</b></a></div>

</div>
<div class="ui-layout-west">
<div name='tag_gem_tsu'>
<div class=modhdr>
<br clear=all>
<span class=titlename>Module : <a href="#"  onclick="showContent('tag_gem_tsu')">gem_tsu</a></span>
<br clear=all>
<table align=left>
<tr class="sortablehead">
<td>SCORE</td><td>LINE</td><td>COND</td><td>TOGGLE</td><td>FSM</td><td>BRANCH</td><td>ASSERT</td></tr><tr>
<td class="s3 cl rt"> 33.21</td>
<td class="s5 cl rt"><a href="mod304.html#Line" > 56.41</a></td>
<td class="wht cl rt"></td>
<td class="s0 cl rt"><a href="mod304.html#Toggle" >  0.66</a></td>
<td class="wht cl rt"></td>
<td class="s4 cl rt"><a href="mod304.html#Branch" > 42.55</a></td>
<td class="wht cl rt"></td>
</tr></table><br clear=all>
<span class=repname>Source File(s) : </span>
<br clear=all>
<a href="javascript:void(0);"  onclick="openSrcFile('/nfs_project/gemini/DV/nadeem/dv/night_reg/gemini/design/ip/GbE/hdl/gem_tsu.v')">/nfs_project/gemini/DV/nadeem/dv/night_reg/gemini/design/ip/GbE/hdl/gem_tsu.v</a><br clear=all>
<br clear=all>
<span class=repname>Module self-instances :</span>
<br clear=all>
<table align=left>
<tr class="sortablehead">
<td class="alfsrt">NAME</td><td>SCORE</td><td>LINE</td><td>COND</td><td>TOGGLE</td><td>FSM</td><td>BRANCH</td><td>ASSERT</td></tr><tr>
<td class="wht cl wordwrap"><a href="mod304.html#inst_tag_30841"  onclick="showContent('inst_tag_30841')">config_ss_tb.DUT.config_ss.gbe_u.gem_top_u.i_gem_ss.i_gem_top.gen_tsu.i_gem_tsu<img src="fx.gif" class="icon"></a></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
<td class="wht cl rt"></td>
</tr></table></div>
</div>
<br clear=all>
</div>
<div class="ui-layout-center">
<div class="ui-layout-center-inner-center">
<div name='tag_gem_tsu'>
<a name="Line"></a>
Line Coverage for Module : <a href="mod304.html" >gem_tsu</a><br clear=all>
<table class="noborder">
<col width="122">
<col span="4" width="82">
<tr><th></th><th>Line No.</th><th>Total</th><th>Covered</th><th>Percent</th></tr>
<tr class="s5"><td class="lf">TOTAL</td><td></td><td>117</td><td>66</td><td>56.41</td></tr>
<tr class="s10"><td class="lf">ALWAYS</td><td>272</td><td>11</td><td>11</td><td>100.00</td></tr>
<tr class="s7"><td class="lf">ALWAYS</td><td>299</td><td>4</td><td>3</td><td>75.00</td></tr>
<tr class="s10"><td class="lf">ALWAYS</td><td>335</td><td>5</td><td>5</td><td>100.00</td></tr>
<tr class="s5"><td class="lf">ALWAYS</td><td>351</td><td>14</td><td>8</td><td>57.14</td></tr>
<tr class="s3"><td class="lf">ALWAYS</td><td>408</td><td>22</td><td>8</td><td>36.36</td></tr>
<tr class="s2"><td class="lf">ALWAYS</td><td>488</td><td>14</td><td>3</td><td>21.43</td></tr>
<tr class="s5"><td class="lf">ALWAYS</td><td>546</td><td>8</td><td>4</td><td>50.00</td></tr>
<tr class="s4"><td class="lf">ALWAYS</td><td>571</td><td>20</td><td>8</td><td>40.00</td></tr>
<tr class="s10"><td class="lf">ALWAYS</td><td>619</td><td>5</td><td>5</td><td>100.00</td></tr>
<tr class="s10"><td class="lf">ALWAYS</td><td>661</td><td>2</td><td>2</td><td>100.00</td></tr>
<tr class="s10"><td class="lf">ALWAYS</td><td>686</td><td>3</td><td>3</td><td>100.00</td></tr>
<tr class="s6"><td class="lf">ALWAYS</td><td>705</td><td>9</td><td>6</td><td>66.67</td></tr>
</table>
<pre class="code"><br clear=all>
271                        begin : p_timer_upd
272        1/1                if (~n_tsureset)
273                              begin
274        1/1                      tsu_timer_adj_wr_reg &lt;= 1'b0;
275        1/1                      tsu_timer_sec_wr_reg &lt;= 1'b0;
276        1/1                      tsu_timer_nsec_wr_reg &lt;= 1'b0;
277        1/1                      tsu_timer_incr_wr_reg &lt;= 1'b0;
278        1/1                      tsu_timer_nsec_cmp_wr_reg &lt;= 1'b0;
279                              end
280                           else
281                              begin
282        1/1                      tsu_timer_adj_wr_reg &lt;= tsu_timer_adj_wr;
283        1/1                      tsu_timer_sec_wr_reg &lt;= tsu_timer_sec_wr;
284        1/1                      tsu_timer_nsec_wr_reg &lt;= tsu_timer_nsec_wr;
285        1/1                      tsu_timer_incr_wr_reg &lt;= tsu_timer_incr_wr;
286        1/1                      tsu_timer_nsec_cmp_wr_reg &lt;= tsu_timer_nsec_cmp_wr;
287                              end
288                        end  // block p_timer_upd
289                     
290                        // used to perform timer adjustment, asserted on toggle
291                        assign adj_wr_tog = tsu_timer_adj_wr_reg ^ tsu_timer_adj_wr;
292                     
293                        assign incr_wr_tog = tsu_timer_incr_wr_reg ^ tsu_timer_incr_wr;
294                     
295                        // only update sub nano-second portion when there is a write to the nano-second portion (sub-ns portion updated 1 pclk cycle after ns portion)
296                        // this means the sub-nanosecond portion does not take effect until after the nano-second portion has been written
297                        always@(posedge tsu_clk or negedge n_tsureset)
298                        begin
299        1/1                if (~n_tsureset)
300                              begin
301        1/1                      tsu_timer_incr_safe[23:0] &lt;= 24'd0;
302                              end
303        1/1                else if (incr_wr_tog)
304                              begin
305        <font color = "red">0/1     ==>              tsu_timer_incr_safe[23:0] &lt;= tsu_timer_incr[23:0];</font>
306                              end
                        MISSING_ELSE
307                        end
308                     
309                        // used to perform timer update, asserted on toggle
310                        assign sec_wr_tog  = tsu_timer_sec_wr_reg ^ tsu_timer_sec_wr;
311                        assign nsec_wr_tog = tsu_timer_nsec_wr_reg ^ tsu_timer_nsec_wr;
312                     
313                        assign timer_nsec_p   = int_timer_nsec_calc_val +
314                                               {22'h000000, tsu_timer_incr[31:24],tsu_timer_incr_safe[23:0]};
315                        assign timer_nsec_p1 = int_timer_nsec_calc_val +
316                                               {22'h000000, tsu_timer_incr[31:24],tsu_timer_incr_safe[23:0]} +
317                                               54'h00000001000000;
318                        assign timer_nsec_m1 = int_timer_nsec_calc_val +
319                                               {22'h000000, tsu_timer_incr[31:24],tsu_timer_incr_safe[23:0]} -
320                                               54'h00000001000000;
321                     
322                        assign nsec_cmp_wr_tog  = tsu_timer_nsec_cmp_wr_reg ^ tsu_timer_nsec_cmp_wr;
323                     
324                     end
325                     endgenerate
326                     
327                     
328                     // -----------------------------------------------------------------------------
329                     //  Timer calculation
330                     // -----------------------------------------------------------------------------
331                     
332                        // register gem_tsu_ms_d and gem_tsu_inc_ctrl_d
333                        always @(posedge tsu_clk or negedge n_tsureset)
334                        begin
335        1/1                if (~n_tsureset)
336                              begin
337        1/1                      gem_tsu_ms_d       &lt;= 1'b0;
338        1/1                      gem_tsu_inc_ctrl_d &lt;= 2'b00;
339                              end
340                           else
341                              begin
342        1/1                      gem_tsu_ms_d       &lt;= gem_tsu_ms;
343        1/1                      gem_tsu_inc_ctrl_d &lt;= gem_tsu_inc_ctrl;
344                              end
345                        end
346                     
347                        // set tsu_timer_incr_adj when timer alternative increment should be used
348                        always @(posedge tsu_clk or negedge n_tsureset)
349                        begin : p_incr_adj
350                     
351        1/1                if (~n_tsureset)
352                              begin
353        1/1                      timer_incr_cnt     &lt;= 8'h00;
354        1/1                      tsu_timer_incr_adj &lt;= 1'b0;
355        1/1                      tsu_sec_incr       &lt;= 1'b0;
356                              end
357                           else
358                              begin
359        1/1                      if (tsu_sec_incr_det)
360        <font color = "red">0/1     ==>                tsu_sec_incr       &lt;= ~tsu_sec_incr;</font>
                        MISSING_ELSE
361                     
362                                 // use number of increments after which alternative increment
363                                 // value should be used
364        1/1                      if (tsu_timer_num_incr != 8'h00)
365                                    begin
366                                       // increment counter has reached number of increments after
367                                       // which alternative increment value should be used
368        <font color = "red">0/1     ==>                    if (timer_incr_cnt &gt;= tsu_timer_num_incr)</font>
369                                          begin
370        <font color = "red">0/1     ==>                          timer_incr_cnt     &lt;= 8'h00;</font>
371        <font color = "red">0/1     ==>                          tsu_timer_incr_adj &lt;= 1'b1;</font>
372                                          end
373                                       // increment counter
374                                       else
375                                          begin
376        <font color = "red">0/1     ==>                          timer_incr_cnt     &lt;= timer_incr_cnt + 8'h01;</font>
377        <font color = "red">0/1     ==>                          tsu_timer_incr_adj &lt;= 1'b0;</font>
378                                          end
379                                    end
380                                 // no number of increments after which alternative increment
381                                 // value should be used
382                                 else
383                                    begin
384        1/1                            timer_incr_cnt     &lt;= 8'h00;
385        1/1                            tsu_timer_incr_adj &lt;= 1'b0;
386                                    end
387                              end
388                        end // block p_incr_adj
389                     
390                     
391                        assign tsu_timer_alt_incr_32_bit =  {tsu_timer_alt_incr, 24'h000000};
392                     
393                        assign timer_nsec_ap  = int_timer_nsec_calc_val +
394                                               {22'h000000, tsu_timer_alt_incr_32_bit};
395                        assign timer_nsec_ap1 = int_timer_nsec_calc_val +
396                                               {22'h000000, tsu_timer_alt_incr_32_bit} +
397                                               54'h00000001000000;
398                        assign timer_nsec_am1 = int_timer_nsec_calc_val +
399                                               {22'h000000, tsu_timer_alt_incr_32_bit} -
400                                               54'h00000001000000;
401                     
402                        assign tsu_timer_nsec_safe = tsu_timer_nsec &amp; {30{nsec_wr_tog}};
403                     
404                        // asynchronous Timer calculation (Part 1) tsu_timer_nsec_1 adjust.
405                        always@(*)
406                        begin
407                           // timer nanoseconds update after APB write
408        1/1                if (nsec_wr_tog)
409                              begin
410        <font color = "red">0/1     ==>              tsu_timer_nsec_1[53:24] = tsu_timer_nsec_safe; //only top 30 bits</font>
411                                                                           //  (nsecs) written
412        <font color = "red">0/1     ==>              tsu_timer_nsec_1[23:0]  = 24'd0; // set LSBs to zero</font>
413                              end
414                           else
415                              begin
416                                 // add timer alternative increment
417        1/1                      if (tsu_timer_incr_adj)
418                                    begin
419        <font color = "red">0/1     ==>                    if (gem_tsu_inc_ctrl_d == 2'b11)</font>
420                                          begin
421        <font color = "red">0/1     ==>                          tsu_timer_nsec_1 = timer_nsec_ap[53:0];</font>
422                                          end
423        <font color = "red">0/1     ==>                    else if (gem_tsu_inc_ctrl_d == 2'b01)</font>
424                                          begin
425        <font color = "red">0/1     ==>                          tsu_timer_nsec_1 = timer_nsec_ap1[53:0];</font>
426                                          end
427        <font color = "red">0/1     ==>                    else if (gem_tsu_inc_ctrl_d == 2'b10)</font>
428                                          begin
429        <font color = "red">0/1     ==>                          tsu_timer_nsec_1 = timer_nsec_am1[53:0];</font>
430                                          end
431                                       else
432                                          begin
433        <font color = "red">0/1     ==>                          if (gem_tsu_ms_d)</font>
434                                                begin
435        <font color = "red">0/1     ==>                                tsu_timer_nsec_1 = 54'h00000000000000;</font>
436                                                end
437                                             else
438                                                begin
439        <font color = "red">0/1     ==>                                tsu_timer_nsec_1 = timer_nsec_ap[53:0];</font>
440                                                end
441                                          end
442                                    end
443                                 // add timer increment
444                                 else
445                                    begin
446        1/1                            if (gem_tsu_inc_ctrl_d == 2'b11)
447                                          begin
448        1/1                                  tsu_timer_nsec_1 = timer_nsec_p[53:0];
449                                          end
450        1/1                            else if (gem_tsu_inc_ctrl_d == 2'b01)
451                                          begin
452        <font color = "red">0/1     ==>                          tsu_timer_nsec_1 = timer_nsec_p1[53:0];</font>
453                                          end
454        1/1                            else if (gem_tsu_inc_ctrl_d == 2'b10)
455                                          begin
456        <font color = "red">0/1     ==>                          tsu_timer_nsec_1 = timer_nsec_m1[53:0];</font>
457                                          end
458                                       else
459                                          begin
460        1/1                                  if (gem_tsu_ms_d)
461                                                begin
462        <font color = "red">0/1     ==>                                tsu_timer_nsec_1 = 54'h00000000000000;</font>
463                                                end
464                                             else
465                                                begin
466        1/1                                        tsu_timer_nsec_1 = timer_nsec_p[53:0];
467                                                end
468                                          end
469                                    end
470                              end
471                     
472                        end
473                     
474                     
475                     
476                     
477                        assign tsu_timer_adj_safe = tsu_timer_adj &amp; {30{adj_wr_tog}};
478                        assign tsu_timer_adj_ctrl_safe = tsu_timer_adj_ctrl &amp; adj_wr_tog;
479                        
480                        wire [55:0] tsu_timer_nsec_1_p_adjust_safe;
481                        assign      tsu_timer_nsec_1_p_adjust_safe = ({1'b0, tsu_timer_nsec_1} + {31'd1000000000, 24'd0});
482                         
483                        // asynchronous Timer calculation (Part 2) tsu_timer_nsec_2 adjust.
484                        always@(*)
485                        begin
486                     
487                           // adj_wr_tog is set with apb write on tsu_timer_adjust register
488        1/1                if (adj_wr_tog)
489                              begin
490                                 // subtract timer_adjust from timer
491        <font color = "red">0/1     ==>              if (tsu_timer_adj_ctrl_safe)</font>
492                                    begin
493                                       // with timer nanoseconds greater or equal than
494                                       // timer_adjust, no decrement of timer seconds
495        <font color = "red">0/1     ==>                    if (tsu_timer_nsec_1[53:8] &gt;= {tsu_timer_adj_safe, 16'h0000})</font>
496                                          begin
497        <font color = "red">0/1     ==>                          tsu_timer_nsec_2 = tsu_timer_nsec_1 -</font>
498                                                               {tsu_timer_adj_safe, 24'h000000};
499        <font color = "red">0/1     ==>                          timer_sec_minus  = 2'b00;</font>
500                                          end
501                     
502                                       // with timer nanoseconds smaller timer_adjust,
503                                       // decrement of timer seconds
504                                       else
505                                          begin
506                                             // timer seconds must be decremented by 1
507        <font color = "red">0/1     ==>                          if (tsu_timer_nsec_1_p_adjust_safe &gt;= {2'd0,tsu_timer_adj_safe, 24'h000000})</font>
508                                                begin
509        <font color = "red">0/1     ==>                                tsu_timer_nsec_2 = {31'd1000000000, 24'd0} +</font>
510                                                                      {1'b0,tsu_timer_nsec_1} -
511                                                                      {1'b0,tsu_timer_adj_safe, 24'h000000};
512        <font color = "red">0/1     ==>                                timer_sec_minus  = 2'b01;</font>
513                                                end
514                                             // timer seconds must be decremented by 2
515                                             else
516                                                begin
517        <font color = "red">0/1     ==>                                tsu_timer_nsec_2 = {31'd2000000000, 24'd0} +</font>
518                                                                      {1'b0,tsu_timer_nsec_1} -
519                                                                      {1'b0,tsu_timer_adj_safe, 24'h000000};
520        <font color = "red">0/1     ==>                                timer_sec_minus  = 2'b10;</font>
521                                                end
522                                          end
523                                    end
524                                 // add timer_adjust to timer
525                                 else
526                                    begin
527        <font color = "red">0/1     ==>                    tsu_timer_nsec_2 = {tsu_timer_nsec_1} +</font>
528                                                          {tsu_timer_adj_safe, 24'h000000};
529        <font color = "red">0/1     ==>                    timer_sec_minus  = 2'b00;</font>
530                                    end
531                              end
532                     
533                           else // no timer adjustment
534                              begin
535        1/1                      tsu_timer_nsec_2 = {1'b0,tsu_timer_nsec_1};
536        1/1                      timer_sec_minus  = 2'b00;
537                              end
538                     
539                        end
540                     
541                     
542                        // calculate timer nanoseconds, check if timer seconds must be incremented
543                        always@(*)
544                        begin
545                           // timer seconds must be incremented by 2
546        1/1                if (tsu_timer_nsec_2 &gt;= {31'd2000000000 , 24'd0})
547                              begin
548        <font color = "red">0/1     ==>              tsu_timer_nsec_3 = tsu_timer_nsec_2 - {31'd2000000000 , 24'd0};</font>
549        <font color = "red">0/1     ==>              timer_sec_plus   = 2'b10;</font>
550                              end
551                           // timer seconds must be incremented by 1
552        1/1                else if (tsu_timer_nsec_2 &gt;= {31'd1000000000 , 24'd0})
553                              begin
554        <font color = "red">0/1     ==>              tsu_timer_nsec_3 = tsu_timer_nsec_2 - {31'd1000000000 , 24'd0};</font>
555        <font color = "red">0/1     ==>              timer_sec_plus   = 2'b01;</font>
556                              end
557                           // no increment of timer seconds
558                           else
559                              begin
560        1/1                      tsu_timer_nsec_3 = tsu_timer_nsec_2[53:0];
561        1/1                      timer_sec_plus   = 2'b00;
562                              end
563                        end
564                     
565                     
566                        assign tsu_timer_sec_safe = tsu_timer_sec &amp; {48{sec_wr_tog}};
567                     
568                        // calculation of timer seconds depends on timer nanoseconds calculation
569                        always@(*)
570                        begin
571        1/1                if (sec_wr_tog)
572                              begin
573        <font color = "red">0/1     ==>              tsu_timer_sec_1  = {1'b0,tsu_timer_sec_safe};</font>
574        <font color = "red">0/1     ==>              tsu_sec_incr_det = 1'b0;</font>
575                              end
576                           else
577                              begin
578        1/1                      if ((gem_tsu_inc_ctrl_d == 2'b00) &amp; gem_tsu_ms_d)
579                                    begin
580        <font color = "red">0/1     ==>                    tsu_timer_sec_1  = int_timer_sec_calc_val + 48'd1;</font>
581        <font color = "red">0/1     ==>                    tsu_sec_incr_det = 1'b0;</font>
582                                    end
583                                 else
584                                    begin
585        1/1                            if (timer_sec_minus == 2'b10)
586                                          begin
587        <font color = "red">0/1     ==>                          tsu_timer_sec_1  = {1'b0,int_timer_sec_calc_val} - 49'd2;</font>
588        <font color = "red">0/1     ==>                          tsu_sec_incr_det = 1'b0;</font>
589                                          end
590        1/1                            else if (timer_sec_minus == 2'b01)
591                                          begin
592        <font color = "red">0/1     ==>                          tsu_timer_sec_1  = {1'b0,int_timer_sec_calc_val} - 49'd1;</font>
593        <font color = "red">0/1     ==>                          tsu_sec_incr_det = 1'b0;</font>
594                                          end
595        1/1                            else if (timer_sec_plus == 2'b10)
596                                          begin
597        <font color = "red">0/1     ==>                          tsu_timer_sec_1  = int_timer_sec_calc_val + 48'd2;</font>
598        <font color = "red">0/1     ==>                          tsu_sec_incr_det = 1'b1;</font>
599                                          end
600        1/1                            else if (timer_sec_plus == 2'b01)
601                                          begin
602        <font color = "red">0/1     ==>                          tsu_timer_sec_1  = int_timer_sec_calc_val + 48'd1;</font>
603        <font color = "red">0/1     ==>                          tsu_sec_incr_det = 1'b1;</font>
604                                          end
605                                       else
606                                          begin
607        1/1                                  tsu_timer_sec_1  = {1'b0,int_timer_sec_calc_val};
608        1/1                                  tsu_sec_incr_det = 1'b0;
609                                          end
610                                    end
611                              end
612                        end
613                     
614                     
615                        // register calculated timer value
616                        always @(posedge tsu_clk or negedge n_tsureset)
617                        begin : p_timer_calc
618                     
619        1/1                if (~n_tsureset)
620                              begin
621        1/1                      int_timer_nsec_calc_val  &lt;= 54'h00000000000000;
622        1/1                      int_timer_sec_calc_val   &lt;= 48'h000000000000;
623                              end
624                           else
625                              begin
626        1/1                      int_timer_nsec_calc_val  &lt;= tsu_timer_nsec_3;
627        1/1                      int_timer_sec_calc_val   &lt;= tsu_timer_sec_1[47:0];
628                              end
629                        end // block p_timer_calc
630                     
631                     
632                     generate if (p_edma_ext_tsu_timer == 1) begin : gen_using_ext_tsu_timer
633                         // signal which can be substitiuted with with int_timer_sec_calc_val
634                         // and int_timer_nsec_calc_val
635                         wire   [47:0] ext_tsu_timer_sec;  // top 48 bits of ext_tsu_timer (secs)
636                         wire   [45:0] ext_tsu_timer_nsec; // low 46 bits of ext_tsu_timer
637                                                          // (nsecs/sub-nsecs)
638                         // useful names for external timer
639                         assign ext_tsu_timer_sec  = ext_tsu_timer[93:46];
640                         assign ext_tsu_timer_nsec = ext_tsu_timer[45:0];
641                     
642                         // external tsu timer mux
643                         // select .._calc_val depending on ext_tsu_timer_en. ( '1' = external, '0' - internal )
644                         always @(*)
645                         begin
646                           if (ext_tsu_timer_en)
647                           begin
648                             timer_sec_calc_val  = ext_tsu_timer_sec;
649                             timer_nsec_calc_val = ext_tsu_timer_nsec;
650                           end
651                           else
652                           begin
653                             timer_sec_calc_val  = int_timer_sec_calc_val;
654                             timer_nsec_calc_val = int_timer_nsec_calc_val[53:8];
655                           end
656                         end
657                     
658                     end else begin : gen_not_using_ext_tsu_timer
659                         always @(*)
660                         begin
661        1/1                timer_sec_calc_val  = int_timer_sec_calc_val;
662        1/1                timer_nsec_calc_val = int_timer_nsec_calc_val[53:8];
663                         end
664                     end
665                     endgenerate
666                     
667                       // Optional parity
668                       wire  [11:0]  tsu_timer_cnt_par_int;
669                       generate if (p_edma_asf_dap_prot == 1) begin : gen_par
670                         cdnsdru_asf_parity_gen_v1 #(.p_data_width(94)) i_gen_tsu_par (
671                           .odd_par    (1'b0),
672                           .data_in    (tsu_timer_cnt),
673                           .data_out   (),
674                           .parity_out (tsu_timer_cnt_par_int)
675                         );
676                       end else begin : gen_no_par
677                         assign tsu_timer_cnt_par_int  = 12'h000;
678                       end
679                       endgenerate
680                       assign tsu_timer_cnt_par  = ((p_edma_ext_tsu_timer == 1) &amp; ext_tsu_timer_en)  ? ext_tsu_timer_par
681                                                                                                     : tsu_timer_cnt_par_int;
682                     
683                        // register strobe register load control
684                        always @(posedge tsu_clk or negedge n_tsureset)
685                        begin : p_timer_strobe
686        1/1                if (~n_tsureset)
687        1/1                   timer_strobe &lt;= 1'b0;
688                           else
689        1/1                   timer_strobe &lt;= ((gem_tsu_inc_ctrl_d == 2'b00) &amp; ~gem_tsu_ms_d);
690                        end
691                     
692                        assign tsu_timer_cnt = {timer_sec_calc_val,timer_nsec_calc_val};
693                        assign timer_cmp     = {tsu_timer_sec_cmp,tsu_timer_nsec_cmp};
694                     
695                     
696                        // compare timer count value
697                        // timer_cmp is a pclk timed signal so comparison is disabled by the tsu_clk timed signal
698                        // allow_cmp until timer_cmp is known to be stable. tsu_timer_cnt comes from a multiplexer
699                        // controlled by the pclk timed signal ext_tsu_en. To avoid CDC hazards the user is required
700                        // to write the TSU nanosecond compare register after the second compare register and after
701                        // writing the external tsu timer enable bit.
702                        always @(posedge tsu_clk or negedge n_tsureset)
703                        begin : p_timer_cmp
704                     
705        1/1                if (~n_tsureset)
706                              begin
707        1/1                      tsu_timer_cmp_val       &lt;= 1'b0;
708        1/1                      allow_cmp               &lt;= 1'b0;
709                              end
710                           else
711                              begin
712        1/1                      if (nsec_cmp_wr_tog)
713        <font color = "red">0/1     ==>                 allow_cmp            &lt;= 1'b1;</font>
714        1/1                      else if (allow_cmp &amp; (tsu_timer_cnt[93:24] == timer_cmp))
715                                    begin
716        <font color = "red">0/1     ==>                    tsu_timer_cmp_val &lt;= 1'b1;</font>
717        <font color = "red">0/1     ==>                    allow_cmp         &lt;= 1'b0;</font>
718                                    end
719                                 else
720        1/1                         tsu_timer_cmp_val    &lt;= 1'b0;
</pre>
<hr>
<a name="Toggle"></a>
Toggle Coverage for Module : <a href="mod304.html" >gem_tsu</a><br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=120></th><th nowrap width=80>Total</th><th nowrap width=80>Covered</th><th nowrap width=80>Percent</th></tr><tr class="s1">
<td>Totals</td>
<td class="rt">26</td>
<td class="rt">3</td>
<td class="rt">11.54 </td>
</tr><tr class="s0">
<td>Total Bits</td>
<td class="rt">906</td>
<td class="rt">6</td>
<td class="rt">0.66  </td>
</tr><tr class="s0">
<td nowrap>Total Bits 0->1</td>
<td class="rt">453</td>
<td class="rt">3</td>
<td class="rt">0.66  </td>
</tr><tr class="s0">
<td nowrap>Total Bits 1->0</td>
<td class="rt">453</td>
<td class="rt">3</td>
<td class="rt">0.66  </td>
</tr></table><br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=120></th><th nowrap width=80></th><th nowrap width=80></th><th nowrap width=80></th></tr><tr class="s1">
<td>Ports</td>
<td class="rt">26</td>
<td class="rt">3</td>
<td class="rt">11.54 </td>
</tr><tr class="s0">
<td>Port Bits</td>
<td class="rt">906</td>
<td class="rt">6</td>
<td class="rt">0.66  </td>
</tr><tr class="s0">
<td nowrap>Port Bits 0->1</td>
<td class="rt">453</td>
<td class="rt">3</td>
<td class="rt">0.66  </td>
</tr><tr class="s0">
<td nowrap>Port Bits 1->0</td>
<td class="rt">453</td>
<td class="rt">3</td>
<td class="rt">0.66  </td>
</tr></table><br clear=all>
<table align=left class="sortable noborder">
<caption><b>Port Details</b></caption>
<tr class="sortablehead">
<td class="alfsrt">Name</td><td class="alfsrt">Toggle</td><td class="alfsrt">Toggle 1->0</td><td class="alfsrt">Toggle 0->1</td><td class="alfsrt">Direction</td></tr><tr>
<td>tsu_clk</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>INPUT</td>
</tr><tr>
<td>n_tsureset</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>INPUT</td>
</tr><tr>
<td>gem_tsu_ms</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>gem_tsu_inc_ctrl[1:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_sec[47:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_nsec[29:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_sec_wr</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_nsec_wr</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_adj_ctrl</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_adj[29:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_adj_wr</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_incr[31:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_incr_wr</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_alt_incr[7:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_num_incr[7:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_nsec_cmp[21:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_nsec_cmp_wr</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>tsu_timer_sec_cmp[47:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>ext_tsu_timer[93:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>ext_tsu_timer_par[11:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>ext_tsu_timer_en</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>INPUT</td>
</tr><tr>
<td>timer_strobe</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td class="s9 cl">Yes</td>
<td>OUTPUT</td>
</tr><tr>
<td>tsu_sec_incr</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>tsu_timer_cnt[93:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>tsu_timer_cnt_par[11:0]</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr><tr>
<td>tsu_timer_cmp_val</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td class="s3 cl">No</td>
<td>OUTPUT</td>
</tr></table><br clear=all>
<hr>
<a name="Branch"></a>
Branch Coverage for Module : <a href="mod304.html" >gem_tsu</a><br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=120></th><th nowrap width=80>Line No.</th><th nowrap width=80>Total</th><th nowrap width=80>Covered</th><th nowrap width=80>Percent</th></tr><tr class="s4">
<td>Branches</td>
<td></td>
<td class="rt">47</td>
<td class="rt">20</td>
<td class="rt">42.55 </td>
</tr><tr class="s10">
<td>IF</td>
<td class="rt">335</td>
<td class="rt">2</td>
<td class="rt">2</td>
<td class="rt">100.00</td>
</tr><tr class="s5">
<td>IF</td>
<td class="rt">351</td>
<td class="rt">6</td>
<td class="rt">3</td>
<td class="rt">50.00 </td>
</tr><tr class="s1">
<td>IF</td>
<td class="rt">408</td>
<td class="rt">11</td>
<td class="rt">2</td>
<td class="rt">18.18 </td>
</tr><tr class="s2">
<td>IF</td>
<td class="rt">488</td>
<td class="rt">5</td>
<td class="rt">1</td>
<td class="rt">20.00 </td>
</tr><tr class="s3">
<td>IF</td>
<td class="rt">546</td>
<td class="rt">3</td>
<td class="rt">1</td>
<td class="rt">33.33 </td>
</tr><tr class="s1">
<td>IF</td>
<td class="rt">571</td>
<td class="rt">7</td>
<td class="rt">1</td>
<td class="rt">14.29 </td>
</tr><tr class="s10">
<td>IF</td>
<td class="rt">619</td>
<td class="rt">2</td>
<td class="rt">2</td>
<td class="rt">100.00</td>
</tr><tr class="s10">
<td>IF</td>
<td class="rt">686</td>
<td class="rt">2</td>
<td class="rt">2</td>
<td class="rt">100.00</td>
</tr><tr class="s5">
<td>IF</td>
<td class="rt">705</td>
<td class="rt">4</td>
<td class="rt">2</td>
<td class="rt">50.00 </td>
</tr><tr class="s10">
<td>IF</td>
<td class="rt">272</td>
<td class="rt">2</td>
<td class="rt">2</td>
<td class="rt">100.00</td>
</tr><tr class="s6">
<td>IF</td>
<td class="rt">299</td>
<td class="rt">3</td>
<td class="rt">2</td>
<td class="rt">66.67 </td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
335              if (~n_tsureset)
                 <font color = "green">-1-</font>  
336                 begin
337                    gem_tsu_ms_d       <= 1'b0;
           <font color = "green">            ==></font>
338                    gem_tsu_inc_ctrl_d <= 2'b00;
339                 end
340              else
341                 begin
342                    gem_tsu_ms_d       <= gem_tsu_ms;
           <font color = "green">            ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
351              if (~n_tsureset)
                 <font color = "green">-1-</font>  
352                 begin
353                    timer_incr_cnt     <= 8'h00;
           <font color = "green">            ==></font>
354                    tsu_timer_incr_adj <= 1'b0;
355                    tsu_sec_incr       <= 1'b0;
356                 end
357              else
358                 begin
359                    if (tsu_sec_incr_det)
                       <font color = "red">-2-</font>  
360                      tsu_sec_incr       <= ~tsu_sec_incr;
           <font color = "red">              ==></font>
                         MISSING_ELSE
           <font color = "green">              ==></font>
361        
362                    // use number of increments after which alternative increment
363                    // value should be used
364                    if (tsu_timer_num_incr != 8'h00)
                       <font color = "red">-3-</font>  
365                       begin
366                          // increment counter has reached number of increments after
367                          // which alternative increment value should be used
368                          if (timer_incr_cnt >= tsu_timer_num_incr)
                             <font color = "red">-4-</font>  
369                             begin
370                                timer_incr_cnt     <= 8'h00;
           <font color = "red">                        ==></font>
371                                tsu_timer_incr_adj <= 1'b1;
372                             end
373                          // increment counter
374                          else
375                             begin
376                                timer_incr_cnt     <= timer_incr_cnt + 8'h01;
           <font color = "red">                        ==></font>
377                                tsu_timer_incr_adj <= 1'b0;
378                             end
379                       end
380                    // no number of increments after which alternative increment
381                    // value should be used
382                    else
383                       begin
384                          timer_incr_cnt     <= 8'h00;
           <font color = "green">                  ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>-3-</th><th nowrap width=80>-4-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>1</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center>0</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
408              if (nsec_wr_tog)
                 <font color = "red">-1-</font>  
409                 begin
410                    tsu_timer_nsec_1[53:24] = tsu_timer_nsec_safe; //only top 30 bits
           <font color = "red">            ==></font>
411                                                              //  (nsecs) written
412                    tsu_timer_nsec_1[23:0]  = 24'd0; // set LSBs to zero
413                 end
414              else
415                 begin
416                    // add timer alternative increment
417                    if (tsu_timer_incr_adj)
                       <font color = "red">-2-</font>  
418                       begin
419                          if (gem_tsu_inc_ctrl_d == 2'b11)
                             <font color = "red">-3-</font>  
420                             begin
421                                tsu_timer_nsec_1 = timer_nsec_ap[53:0];
           <font color = "red">                        ==></font>
422                             end
423                          else if (gem_tsu_inc_ctrl_d == 2'b01)
                                  <font color = "red">-4-</font>  
424                             begin
425                                tsu_timer_nsec_1 = timer_nsec_ap1[53:0];
           <font color = "red">                        ==></font>
426                             end
427                          else if (gem_tsu_inc_ctrl_d == 2'b10)
                                  <font color = "red">-5-</font>  
428                             begin
429                                tsu_timer_nsec_1 = timer_nsec_am1[53:0];
           <font color = "red">                        ==></font>
430                             end
431                          else
432                             begin
433                                if (gem_tsu_ms_d)
                                   <font color = "red">-6-</font>  
434                                   begin
435                                      tsu_timer_nsec_1 = 54'h00000000000000;
           <font color = "red">                              ==></font>
436                                   end
437                                else
438                                   begin
439                                      tsu_timer_nsec_1 = timer_nsec_ap[53:0];
           <font color = "red">                              ==></font>
440                                   end
441                             end
442                       end
443                    // add timer increment
444                    else
445                       begin
446                          if (gem_tsu_inc_ctrl_d == 2'b11)
                             <font color = "green">-7-</font>  
447                             begin
448                                tsu_timer_nsec_1 = timer_nsec_p[53:0];
           <font color = "green">                        ==></font>
449                             end
450                          else if (gem_tsu_inc_ctrl_d == 2'b01)
                                  <font color = "red">-8-</font>  
451                             begin
452                                tsu_timer_nsec_1 = timer_nsec_p1[53:0];
           <font color = "red">                        ==></font>
453                             end
454                          else if (gem_tsu_inc_ctrl_d == 2'b10)
                                  <font color = "red">-9-</font>  
455                             begin
456                                tsu_timer_nsec_1 = timer_nsec_m1[53:0];
           <font color = "red">                        ==></font>
457                             end
458                          else
459                             begin
460                                if (gem_tsu_ms_d)
                                   <font color = "red">-10-</font>  
461                                   begin
462                                      tsu_timer_nsec_1 = 54'h00000000000000;
           <font color = "red">                              ==></font>
463                                   end
464                                else
465                                   begin
466                                      tsu_timer_nsec_1 = timer_nsec_p[53:0];
           <font color = "green">                              ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>-3-</th><th nowrap width=80>-4-</th><th nowrap width=80>-5-</th><th nowrap width=80>-6-</th><th nowrap width=80>-7-</th><th nowrap width=80>-8-</th><th nowrap width=80>-9-</th><th nowrap width=80>-10-</th><th nowrap width=80>Status</th></tr><tr class="uRed">
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>1</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>1</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>1</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>1</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>1</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
488              if (adj_wr_tog)
                 <font color = "red">-1-</font>  
489                 begin
490                    // subtract timer_adjust from timer
491                    if (tsu_timer_adj_ctrl_safe)
                       <font color = "red">-2-</font>  
492                       begin
493                          // with timer nanoseconds greater or equal than
494                          // timer_adjust, no decrement of timer seconds
495                          if (tsu_timer_nsec_1[53:8] >= {tsu_timer_adj_safe, 16'h0000})
                             <font color = "red">-3-</font>  
496                             begin
497                                tsu_timer_nsec_2 = tsu_timer_nsec_1 -
           <font color = "red">                        ==></font>
498                                                  {tsu_timer_adj_safe, 24'h000000};
499                                timer_sec_minus  = 2'b00;
500                             end
501        
502                          // with timer nanoseconds smaller timer_adjust,
503                          // decrement of timer seconds
504                          else
505                             begin
506                                // timer seconds must be decremented by 1
507                                if (tsu_timer_nsec_1_p_adjust_safe >= {2'd0,tsu_timer_adj_safe, 24'h000000})
                                   <font color = "red">-4-</font>  
508                                   begin
509                                      tsu_timer_nsec_2 = {31'd1000000000, 24'd0} +
           <font color = "red">                              ==></font>
510                                                         {1'b0,tsu_timer_nsec_1} -
511                                                         {1'b0,tsu_timer_adj_safe, 24'h000000};
512                                      timer_sec_minus  = 2'b01;
513                                   end
514                                // timer seconds must be decremented by 2
515                                else
516                                   begin
517                                      tsu_timer_nsec_2 = {31'd2000000000, 24'd0} +
           <font color = "red">                              ==></font>
518                                                         {1'b0,tsu_timer_nsec_1} -
519                                                         {1'b0,tsu_timer_adj_safe, 24'h000000};
520                                      timer_sec_minus  = 2'b10;
521                                   end
522                             end
523                       end
524                    // add timer_adjust to timer
525                    else
526                       begin
527                          tsu_timer_nsec_2 = {tsu_timer_nsec_1} +
           <font color = "red">                  ==></font>
528                                             {tsu_timer_adj_safe, 24'h000000};
529                          timer_sec_minus  = 2'b00;
530                       end
531                 end
532        
533              else // no timer adjustment
534                 begin
535                    tsu_timer_nsec_2 = {1'b0,tsu_timer_nsec_1};
           <font color = "green">            ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>-3-</th><th nowrap width=80>-4-</th><th nowrap width=80>Status</th></tr><tr class="uRed">
<td align=center>1</td>
<td align=center>1</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>1</td>
<td align=center>0</td>
<td align=center>1</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>1</td>
<td align=center>0</td>
<td align=center>0</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>1</td>
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
546              if (tsu_timer_nsec_2 >= {31'd2000000000 , 24'd0})
                 <font color = "red">-1-</font>  
547                 begin
548                    tsu_timer_nsec_3 = tsu_timer_nsec_2 - {31'd2000000000 , 24'd0};
           <font color = "red">            ==></font>
549                    timer_sec_plus   = 2'b10;
550                 end
551              // timer seconds must be incremented by 1
552              else if (tsu_timer_nsec_2 >= {31'd1000000000 , 24'd0})
                      <font color = "red">-2-</font>  
553                 begin
554                    tsu_timer_nsec_3 = tsu_timer_nsec_2 - {31'd1000000000 , 24'd0};
           <font color = "red">            ==></font>
555                    timer_sec_plus   = 2'b01;
556                 end
557              // no increment of timer seconds
558              else
559                 begin
560                    tsu_timer_nsec_3 = tsu_timer_nsec_2[53:0];
           <font color = "green">            ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>Status</th></tr><tr class="uRed">
<td align=center>1</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>1</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
571              if (sec_wr_tog)
                 <font color = "red">-1-</font>  
572                 begin
573                    tsu_timer_sec_1  = {1'b0,tsu_timer_sec_safe};
           <font color = "red">            ==></font>
574                    tsu_sec_incr_det = 1'b0;
575                 end
576              else
577                 begin
578                    if ((gem_tsu_inc_ctrl_d == 2'b00) & gem_tsu_ms_d)
                       <font color = "red">-2-</font>  
579                       begin
580                          tsu_timer_sec_1  = int_timer_sec_calc_val + 48'd1;
           <font color = "red">                  ==></font>
581                          tsu_sec_incr_det = 1'b0;
582                       end
583                    else
584                       begin
585                          if (timer_sec_minus == 2'b10)
                             <font color = "red">-3-</font>  
586                             begin
587                                tsu_timer_sec_1  = {1'b0,int_timer_sec_calc_val} - 49'd2;
           <font color = "red">                        ==></font>
588                                tsu_sec_incr_det = 1'b0;
589                             end
590                          else if (timer_sec_minus == 2'b01)
                                  <font color = "red">-4-</font>  
591                             begin
592                                tsu_timer_sec_1  = {1'b0,int_timer_sec_calc_val} - 49'd1;
           <font color = "red">                        ==></font>
593                                tsu_sec_incr_det = 1'b0;
594                             end
595                          else if (timer_sec_plus == 2'b10)
                                  <font color = "red">-5-</font>  
596                             begin
597                                tsu_timer_sec_1  = int_timer_sec_calc_val + 48'd2;
           <font color = "red">                        ==></font>
598                                tsu_sec_incr_det = 1'b1;
599                             end
600                          else if (timer_sec_plus == 2'b01)
                                  <font color = "red">-6-</font>  
601                             begin
602                                tsu_timer_sec_1  = int_timer_sec_calc_val + 48'd1;
           <font color = "red">                        ==></font>
603                                tsu_sec_incr_det = 1'b1;
604                             end
605                          else
606                             begin
607                                tsu_timer_sec_1  = {1'b0,int_timer_sec_calc_val};
           <font color = "green">                        ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>-3-</th><th nowrap width=80>-4-</th><th nowrap width=80>-5-</th><th nowrap width=80>-6-</th><th nowrap width=80>Status</th></tr><tr class="uRed">
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
619              if (~n_tsureset)
                 <font color = "green">-1-</font>  
620                 begin
621                    int_timer_nsec_calc_val  <= 54'h00000000000000;
           <font color = "green">            ==></font>
622                    int_timer_sec_calc_val   <= 48'h000000000000;
623                 end
624              else
625                 begin
626                    int_timer_nsec_calc_val  <= tsu_timer_nsec_3;
           <font color = "green">            ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
686              if (~n_tsureset)
                 <font color = "green">-1-</font>  
687                 timer_strobe <= 1'b0;
           <font color = "green">         ==></font>
688              else
689                 timer_strobe <= ((gem_tsu_inc_ctrl_d == 2'b00) & ~gem_tsu_ms_d);
           <font color = "green">         ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
705              if (~n_tsureset)
                 <font color = "green">-1-</font>  
706                 begin
707                    tsu_timer_cmp_val       <= 1'b0;
           <font color = "green">            ==></font>
708                    allow_cmp               <= 1'b0;
709                 end
710              else
711                 begin
712                    if (nsec_cmp_wr_tog)
                       <font color = "red">-2-</font>  
713                       allow_cmp            <= 1'b1;
           <font color = "red">               ==></font>
714                    else if (allow_cmp & (tsu_timer_cnt[93:24] == timer_cmp))
                            <font color = "red">-3-</font>  
715                       begin
716                          tsu_timer_cmp_val <= 1'b1;
           <font color = "red">                  ==></font>
717                          allow_cmp         <= 1'b0;
718                       end
719                    else
720                       tsu_timer_cmp_val    <= 1'b0;
           <font color = "green">               ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>-3-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td align=center nowrap>-</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>1</td>
<td align=center nowrap>-</td>
<td>Not Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
272              if (~n_tsureset)
                 <font color = "green">-1-</font>  
273                 begin
274                    tsu_timer_adj_wr_reg <= 1'b0;
           <font color = "green">            ==></font>
275                    tsu_timer_sec_wr_reg <= 1'b0;
276                    tsu_timer_nsec_wr_reg <= 1'b0;
277                    tsu_timer_incr_wr_reg <= 1'b0;
278                    tsu_timer_nsec_cmp_wr_reg <= 1'b0;
279                 end
280              else
281                 begin
282                    tsu_timer_adj_wr_reg <= tsu_timer_adj_wr;
           <font color = "green">            ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td>Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
<pre class="code"><br clear=all>
299              if (~n_tsureset)
                 <font color = "green">-1-</font>  
300                 begin
301                    tsu_timer_incr_safe[23:0] <= 24'd0;
           <font color = "green">            ==></font>
302                 end
303              else if (incr_wr_tog)
                      <font color = "red">-2-</font>  
304                 begin
305                    tsu_timer_incr_safe[23:0] <= tsu_timer_incr[23:0];
           <font color = "red">            ==></font>
306                 end
                    MISSING_ELSE
           <font color = "green">         ==></font>
</pre>
<br clear=all>
<span class=repname>Branches:</span>
<br clear=all>
<table align=left class="noborder">
<tr>
<th nowrap width=80>-1-</th><th nowrap width=80>-2-</th><th nowrap width=80>Status</th></tr><tr class="uGreen">
<td align=center>1</td>
<td align=center nowrap>-</td>
<td>Covered</td>
</tr><tr class="uRed">
<td align=center>0</td>
<td align=center>1</td>
<td>Not Covered</td>
</tr><tr class="uGreen">
<td align=center>0</td>
<td align=center>0</td>
<td>Covered</td>
</tr></table><br clear=all>
</div>
</div>
<div class="ui-layout-center-inner-north">
<div id="center-bread-crumb" class="breadCrumb module urg-margin-bottom">
  <ul name="tag_gem_tsu">
    <li>
      <a href="#Line">Line</a>    </li>
    <li>
      <a href="#Toggle">Toggle</a>    </li>
    <li>
      <a href="#Branch">Branch</a>    </li>
  </ul>
</div>
</div>
</div>
<div class="ui-layout-south">
<table align=center><tr><td class="s0 cl">0%</td>
<td class="s1 cl">10%</td>
<td class="s2 cl">20%</td>
<td class="s3 cl">30%</td>
<td class="s4 cl">40%</td>
<td class="s5 cl">50%</td>
<td class="s6 cl">60%</td>
<td class="s7 cl">70%</td>
<td class="s8 cl">80%</td>
<td class="s9 cl">90%</td>
<td class="s10 cl">100%</td></tr></table></div>
</body>
</html>
